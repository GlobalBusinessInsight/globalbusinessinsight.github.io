<!DOCTYPE html>
<html lang="zh-CN">
<head>
   <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6214772877334340"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>中国煤炭市场三十年变迁：分析报告</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Muted Blue/Grey Accents -->
    <!-- Application Structure Plan: A thematic, single-page dashboard design. A sticky top navigation bar allows users to jump between sections: 1. Overview & Historical Eras (landing section with interactive timeline), 2. Macroeconomic Linkages (interactive correlation charts), 3. Key Driving Factors (clickable flowchart diagram), 4. Government's Hand (vertical policy timeline), 5. Cost Breakdown Journey (visual infographic), and 6. Conclusion. This non-linear structure prioritizes user-driven exploration of interconnected themes over the report's linear chapter format, enhancing usability and insight discovery. -->
    <!-- Visualization & Content Choices: 1. Price History -> Goal: Show change -> Viz: Interactive line chart (Chart.js) with highlighted eras -> Interaction: Hover for details, buttons to filter coal types. Justification: Best way to visualize long-term trends and volatility. 2. Macro-Data -> Goal: Show relationships -> Viz: Multi-axis line chart (Chart.js) -> Interaction: Checkboxes to toggle datasets (GDP, Power, Steel). Justification: Allows direct visual correlation analysis. 3. Driving Factors -> Goal: Organize complex relationships -> Viz: HTML/CSS flowchart -> Interaction: Click nodes to reveal detailed text. Justification: Simplifies complex cause-and-effect chains. 4. Cost Structure -> Goal: Explain a process -> Viz: HTML/CSS visual infographic -> Interaction: Static visual flow. Justification: Makes the abstract cost accumulation process concrete and easy to follow. All text is sourced from the report to provide context. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f8f7f4;
            color: #333;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 40vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 450px;
            }
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link.active, .nav-link:hover {
            color: #1e3a8a;
            border-bottom-color: #1e3a8a;
        }
        .section-card {
            background-color: #ffffff;
            border: 1px solid #e5e7eb;
            transition: box-shadow 0.3s, transform 0.3s;
        }
        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .tab-button.active {
            background-color: #2563eb;
            color: white;
        }
        .factor-card {
            cursor: pointer;
        }
        .factor-card .details {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-out;
        }
    </style>
</head>
<body class="scroll-smooth">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl md:text-2xl font-bold text-gray-800">煤炭三十年</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a href="#overview" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 border-b-2 border-transparent">概览与时代脉络</a>
                        <a href="#macro" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 border-b-2 border-transparent">宏观经济联动</a>
                        <a href="#drivers" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 border-b-2 border-transparent">关键驱动因素</a>
                        <a href="#policy" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 border-b-2 border-transparent">政府的“手”</a>
                        <a href="#costs" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 border-b-2 border-transparent">成本解构之旅</a>
                        <a href="#conclusion" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-700 border-b-2 border-transparent">结论与展望</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
                        <span class="sr-only">打开主菜单</span>
                        <svg class="h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7" />
                        </svg>
                    </button>
                </div>
            </div>
        </nav>
        <div id="mobile-menu" class="md:hidden hidden">
            <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#overview" class="block nav-link px-3 py-2 rounded-md text-base font-medium text-gray-700">概览与时代脉络</a>
                <a href="#macro" class="block nav-link px-3 py-2 rounded-md text-base font-medium text-gray-700">宏观经济联动</a>
                <a href="#drivers" class="block nav-link px-3 py-2 rounded-md text-base font-medium text-gray-700">关键驱动因素</a>
                <a href="#policy" class="block nav-link px-3 py-2 rounded-md text-base font-medium text-gray-700">政府的“手”</a>
                <a href="#costs" class="block nav-link px-3 py-2 rounded-md text-base font-medium text-gray-700">成本解构之旅</a>
                <a href="#conclusion" class="block nav-link px-3 py-2 rounded-md text-base font-medium text-gray-700">结论与展望</a>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        
        <section id="overview" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-gray-800">中国煤炭价格轨迹的四个时代</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                过去三十年，中国煤炭价格的剧烈波动，深刻描绘了一部在市场力量与强大国家意志之间不断演进的历史。本节通过交互式图表，带您回顾定义中国煤炭市场的四个截然不同的时代，揭示价格曲线背后的驱动逻辑。
            </p>
            <div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg">
                <div class="chart-container">
                    <canvas id="priceHistoryChart"></canvas>
                </div>
                <div class="mt-6 text-center">
                    <p class="text-sm text-gray-500">点击下方按钮切换不同煤种的价格曲线。</p>
                </div>
            </div>
        </section>

        <section id="macro" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-gray-800">宏观经济联动分析</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                煤炭是中国经济的“压舱石”，其产量、价格与GDP、电力、钢铁等关键指标紧密相连。本图表旨在量化展示这种深刻的共生关系。请勾选不同指标，观察它们与煤炭价格走势的关联性，探索经济增长背后的能源脉搏。
            </p>
            <div class="bg-white p-4 sm:p-6 rounded-lg shadow-lg">
                 <div class="chart-container">
                    <canvas id="macroFactorsChart"></canvas>
                </div>
                <div id="macro-toggles" class="mt-6 flex flex-wrap justify-center gap-4">
                </div>
            </div>
        </section>

        <section id="drivers" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-gray-800">关键驱动因素剖析</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                煤炭价格波动是供给、需求和政策多重因素共同作用的结果。我们构建了一个交互式框架，帮助您理解这些复杂力量如何相互交织。点击下方的卡片，深入了解每个核心因素的具体内涵和影响机制。
            </p>
            <div class="space-y-8">
                <div class="grid md:grid-cols-3 gap-8 items-start">
                    <div id="supply-factors" class="space-y-4"></div>
                    <div id="demand-factors" class="space-y-4"></div>
                    <div id="policy-factors" class="space-y-4"></div>
                </div>
            </div>
        </section>

        <section id="policy" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-gray-800">政府的“手”：关键干预措施</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                在中国煤炭市场，政府从来不是旁观者。从供给侧改革到“合理价格区间”，一系列强有力的政策工具深刻地影响着市场格局。本节以时间轴的形式，梳理了近年来的关键干预措施，揭示了国家意志如何塑造市场。
            </p>
            <div id="policy-timeline" class="relative border-l-2 border-blue-200 ml-6">
            </div>
        </section>
        
        <section id="costs" class="mb-16 scroll-mt-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-gray-800">成本解构之旅：一吨煤的诞生与迁徙</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                煤炭的最终价格由生产、物流等多个环节的成本累积而成。我们以一吨产自鄂尔多斯的煤炭运往广州电厂为例，通过可视化的方式，带您踏上一段成本解构之旅，直观感受“距离的暴政”和物流环节的极端重要性。
            </p>
            <div class="bg-white p-6 rounded-lg shadow-lg">
                <div id="cost-journey-container" class="flex flex-col md:flex-row items-center justify-center gap-4 p-4 space-y-4 md:space-y-0 md:space-x-2 overflow-x-auto">
                </div>
                <div class="mt-6 text-center">
                    <p class="text-lg font-bold">最终到厂价: <span id="final-cost" class="text-red-600"></span> 元/吨</p>
                    <p class="text-sm text-gray-500 mt-2">其中物流成本占比高达 <span id="logistics-percentage" class="font-semibold"></span></p>
                </div>
            </div>
        </section>

        <section id="conclusion" class="scroll-mt-16">
            <h2 class="text-3xl font-bold text-center mb-4 text-gray-800">结论与战略展望</h2>
            <p class="max-w-3xl mx-auto text-center text-gray-600 mb-8">
                回顾三十年，中国煤炭市场在“市场之手”与“政府之手”的交织作用下，走出了一条独特的发展道路。展望未来，它将步入一个由国家精心管理的、长周期的战略性收缩，其角色将从“主力军”转变为“稳定器”。
            </p>
            <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="section-card p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">政策钟摆</h3>
                    <p class="text-gray-600 text-sm">政府角色在“放任市场”与“强力干预”间摆动，2021年后明显偏向以能源安全为首要目标的深度常态化监管。</p>
                </div>
                <div class="section-card p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">“双碳”悖论</h3>
                    <p class="text-gray-600 text-sm">长期减碳目标与短期能源安全需求形成矛盾，导致“边发展新能源，边巩固煤炭兜底”的政策组合。</p>
                </div>
                <div class="section-card p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">价格管制制度化</h3>
                    <p class="text-gray-600 text-sm">调控从危机应对演变为以“长协”和“价格区间”为核心的体系化管理，标志着“有边界的市场经济”新阶段。</p>
                </div>
                <div class="section-card p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">成本的决定性力量</h3>
                    <p class="text-gray-600 text-sm">生产成本决定区域竞争力，巨大的物流成本则深刻影响跨区域能源经济格局。</p>
                </div>
                <div class="section-card p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">角色的演变</h3>
                    <p class="text-gray-600 text-sm">煤炭的核心功能将从“主力军”转变为保障电网稳定的“战略预备队”和“稳定器”。</p>
                </div>
                <div class="section-card p-6 rounded-lg">
                    <h3 class="font-bold text-lg mb-2 text-blue-800">转型的挑战</h3>
                    <p class="text-gray-600 text-sm">“公正转型”是巨大挑战，如何安置产业工人、帮助资源型城市转型，将是制约转型速度的关键变量。</p>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-800 text-white mt-16">
        <div class="container mx-auto py-4 px-4 sm:px-6 lg:px-8 text-center text-sm">
            <p>基于《中国煤炭市场：价格、政策与权力的三十年回顾》报告生成。</p>
            <p>&copy; 2024 交互式分析报告。保留所有权利。</p>
        </div>
    </footer>

<script>
document.addEventListener('DOMContentLoaded', function () {
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    const navLinks = document.querySelectorAll('.nav-link');
    const sections = document.querySelectorAll('section');

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === entry.target.id) {
                        link.classList.add('active');
                    }
                });
            }
        });
    }, { rootMargin: '-30% 0px -70% 0px' });

    sections.forEach(section => {
        observer.observe(section);
    });
    
    navLinks.forEach(link => {
        link.addEventListener('click', () => {
            if (mobileMenu.classList.contains('hidden') === false) {
                mobileMenu.classList.add('hidden');
            }
        });
    });

    const data = {
        years: [1995, 2000, 2005, 2010, 2011, 2012, 2013, 2014, 2015, 2016, 2017, 2018, 2019, 2020, 2021, 2022, 2023],
        prices: {
            power_coal: [200, 220, 450, 780, 820, 650, 610, 520, 410, 550, 680, 640, 580, 590, 1100, 1250, 900],
        },
        macro: {
            gdp_growth: [11.0, 8.5, 11.4, 10.6, 9.6, 7.9, 7.8, 7.4, 7.0, 6.8, 6.9, 6.7, 6.0, 2.2, 8.4, 3.0, 5.4],
            power_consumption: [10079, 13477, 24975, 41999, 47046, 49645, 53417, 55627, 56029, 59749, 63731, 68939, 72501, 75231, 83128, 83887, 92242],
            steel_production: [9536, 12850, 35586, 62665, 69550, 71654, 77904, 82270, 80383, 80837, 83173, 92826, 99634, 105300, 103279, 101796, 101908],
            coal_production: [136000, 117100, 220500, 324000, 352000, 365000, 397000, 387000, 375000, 341000, 352000, 368000, 385000, 390000, 413000, 456000, 471000]
        },
        drivers: {
            supply: [
                { title: '产能与政策', content: '中国煤炭供给从严重过剩到国家强力调控。2016年供给侧改革通过行政手段强制去产能，重塑供给端，使供给弹性显著下降。' },
                { title: '安全与环保', content: '安全生产和环保法规是约束供给的“硬闸门”。重大安全事故或环保检查会引发煤矿停产减产，迅速收紧市场供应，加剧价格向上弹性。' },
                { title: '进口煤角色', content: '进口煤是市场的“边际调节器”。国内外价差决定进口量，政府也通过关税、配额等手段主动利用进口煤调节国内供需，服务于“保供稳价”目标。' }
            ],
            demand: [
                { title: '分部门需求', content: '动力煤主要需求来自电力、建材、化工、冶金。电力是主力，与宏观经济和季节性因素相关。焦煤需求几乎完全依赖钢铁行业景气度。' },
                { title: '库存水平', content: '库存是供需的“蓄水池”，其水平是判断市场松紧和预测价格的关键指标。港口和电厂库存过高预示价跌，过低则可能引发恐慌性补库推高价格。' },
                { title: '新旧经济动能', content: '“旧经济”（钢铁、水泥）需求增长空间有限，而“新经济”（数据中心、电动汽车）驱动用电量增长，短期反而加大了对煤电的需求，形成结构性矛盾。' }
            ],
            policy: [
                { title: '“双碳”悖论', content: '长期减碳目标抑制煤炭投资，但短期能源安全需求又强化煤炭“压舱石”作用。这导致“先立后破”的策略：先保安全，再稳步替代。' },
            ]
        },
        policyTimeline: [
            { year: '2016-2018', title: '供给侧结构性改革', content: '通过行政命令关闭落后煤矿，化解过剩产能，提升产业集中度，帮助煤企脱困。' },
            { year: '2021.10-至今', title: '“保供稳价”运动', content: '应对“煤荒”危机，通过命令式增产、释放储备、协调运输等手段，迅速将失控的煤价拉回可控范围。' },
            { year: '2022.02', title: '“合理价格区间”政策', content: '正式确立动力煤570-770元/吨的“合理价格区间”，将价格调控从临时管理转向制度化、常态化监管。' },
            { year: '2022-至今', title: '强化中长期合同监管', content: '持续要求提高长协合同签订比例和履约率，夯实电煤供应的“压舱石”，隔离现货市场波动。' },
            { year: '2025.01 (试行)', title: '焦煤长协煤钢联动机制', content: '建立新的焦煤长协定价机制，促进焦煤、钢铁产业链协同发展，稳定上下游利润。' }
        ],
        costJourney: [
            { stage: '1. 坑口成本', icon: '⛏️', cost: 250, description: '鄂尔多斯某矿井生产完全成本' },
            { stage: '2. 铁路运输', icon: '🚂', cost: 140, description: '从鄂尔多斯运至秦皇岛港' },
            { stage: '3. 发运港费用', icon: '⚓', cost: 25, description: '港杂费（装卸、堆存等）' },
            { stage: '4. 海上运输', icon: '🚢', cost: 60, description: '从秦皇岛港海运至广州港' },
            { stage: '5. 终端配送', icon: '🚚', cost: 35, description: '广州港卸货及运至电厂' }
        ]
    };

    function renderPriceHistoryChart() {
        const ctx = document.getElementById('priceHistoryChart').getContext('2d');
        new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.years,
                datasets: [{
                    label: '动力煤价格 (元/吨)',
                    data: data.prices.power_coal,
                    borderColor: '#2563eb',
                    backgroundColor: 'rgba(37, 99, 235, 0.1)',
                    fill: true,
                    tension: 0.3
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    title: { display: true, text: '秦皇岛Q5500动力煤年度均价 (1995-2023)' },
                    legend: { position: 'bottom' },
                    annotation: {
                        annotations: {
                            era1: { type: 'box', xMin: 1, xMax: 4, backgroundColor: 'rgba(255, 99, 132, 0.1)', label: { content: '黄金十年', display: true, position: 'start' } },
                            era2: { type: 'box', xMin: 5, xMax: 8, backgroundColor: 'rgba(54, 162, 235, 0.1)', label: { content: '大调整', display: true, position: 'start' } },
                            era3: { type: 'box', xMin: 9, xMax: 13, backgroundColor: 'rgba(255, 206, 86, 0.1)', label: { content: '供给侧改革', display: true, position: 'start' } },
                            era4: { type: 'box', xMin: 14, xMax: 16, backgroundColor: 'rgba(75, 192, 192, 0.1)', label: { content: '新波动', display: true, position: 'start' } }
                        }
                    }
                },
                scales: {
                    y: { beginAtZero: true, title: { display: true, text: '元/吨' } },
                    x: { title: { display: true, text: '年份' } }
                }
            }
        });
    }

    function renderMacroFactorsChart() {
        const ctx = document.getElementById('macroFactorsChart').getContext('2d');
        const datasets = [
            {
                label: '动力煤价格 (元/吨)',
                data: data.prices.power_coal,
                borderColor: '#ef4444',
                yAxisID: 'yPrice',
                hidden: false
            },
            {
                label: 'GDP增长率 (%)',
                data: data.macro.gdp_growth,
                borderColor: '#22c55e',
                yAxisID: 'yPercent',
                hidden: true
            },
            {
                label: '全社会用电量 (亿kWh)',
                data: data.macro.power_consumption,
                borderColor: '#f97316',
                yAxisID: 'yAmount',
                hidden: true
            },
            {
                label: '粗钢产量 (万吨)',
                data: data.macro.steel_production,
                borderColor: '#6b7280',
                yAxisID: 'yAmount',
                hidden: true
            },
            {
                label: '原煤产量 (万吨)',
                data: data.macro.coal_production,
                borderColor: '#8b5cf6',
                yAxisID: 'yAmount',
                hidden: true
            }
        ];

        const chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: data.years,
                datasets: datasets
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                interaction: { mode: 'index', intersect: false },
                plugins: {
                    title: { display: true, text: '煤炭价格与宏观经济指标关联' },
                    legend: { display: false }
                },
                scales: {
                    yPrice: { type: 'linear', display: true, position: 'left', title: { display: true, text: '价格(元/吨) & 增长率(%)' } },
                    yAmount: { type: 'linear', display: true, position: 'right', title: { display: true, text: '产量/用电量' }, grid: { drawOnChartArea: false } }
                }
            }
        });

        const togglesContainer = document.getElementById('macro-toggles');
        datasets.forEach((ds, i) => {
            const checked = !ds.hidden;
            const toggleHtml = `
                <label class="inline-flex items-center cursor-pointer">
                    <input type="checkbox" class="form-checkbox h-5 w-5 rounded" data-dataset-index="${i}" ${checked ? 'checked' : ''} style="accent-color: ${ds.borderColor};">
                    <span class="ml-2 text-gray-700" style="color: ${ds.borderColor};">${ds.label}</span>
                </label>
            `;
            togglesContainer.innerHTML += toggleHtml;
        });

        togglesContainer.addEventListener('change', (e) => {
            const index = e.target.dataset.datasetIndex;
            chart.setDatasetVisibility(index, e.target.checked);
            chart.update();
        });
    }

    function renderDrivers() {
        const supplyContainer = document.getElementById('supply-factors');
        const demandContainer = document.getElementById('demand-factors');
        const policyContainer = document.getElementById('policy-factors');
        
        const createCard = (item) => `
            <div class="factor-card section-card rounded-lg p-4 shadow-sm border border-gray-200">
                <h4 class="font-bold text-md text-gray-800">${item.title}</h4>
                <div class="details text-sm text-gray-600 mt-2">
                    <p>${item.content}</p>
                </div>
            </div>`;

        supplyContainer.innerHTML = `<h3 class="text-xl font-semibold text-center text-green-700 mb-2">供给侧</h3>` + data.drivers.supply.map(createCard).join('');
        demandContainer.innerHTML = `<h3 class="text-xl font-semibold text-center text-red-700 mb-2">需求侧</h3>` + data.drivers.demand.map(createCard).join('');
        policyContainer.innerHTML = `<h3 class="text-xl font-semibold text-center text-blue-700 mb-2">政策与环境</h3>` + data.drivers.policy.map(createCard).join('');

        document.querySelectorAll('.factor-card').forEach(card => {
            card.addEventListener('click', () => {
                const details = card.querySelector('.details');
                if (details.style.maxHeight) {
                    details.style.maxHeight = null;
                } else {
                    details.style.maxHeight = details.scrollHeight + "px";
                }
            });
        });
    }

    function renderPolicyTimeline() {
        const container = document.getElementById('policy-timeline');
        container.innerHTML = data.policyTimeline.map(item => `
            <div class="mb-8 ml-8 section-card p-4 rounded-lg">
                <span class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white">
                    <svg class="w-3 h-3 text-blue-800" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                </span>
                <h3 class="flex items-center mb-1 text-lg font-semibold text-gray-900">${item.title}</h3>
                <time class="block mb-2 text-sm font-normal leading-none text-gray-400">${item.year}</time>
                <p class="text-base font-normal text-gray-600">${item.content}</p>
            </div>
        `).join('');
    }

    function renderCostJourney() {
        const container = document.getElementById('cost-journey-container');
        let cumulativeCost = 0;
        const journeyHtml = data.costJourney.map((item, index) => {
            cumulativeCost += item.cost;
            const arrow = index < data.costJourney.length - 1 ? `<div class="text-3xl text-gray-300 mx-4 hidden md:block">&rarr;</div>` : '';
            return `
                <div class="flex flex-col items-center text-center">
                    <div class="text-5xl">${item.icon}</div>
                    <h4 class="font-bold mt-2">${item.stage}</h4>
                    <p class="text-sm text-gray-500">${item.description}</p>
                    <p class="text-lg font-semibold text-blue-600 mt-1">+${item.cost}元</p>
                    <p class="text-xs text-gray-400">累计: ${cumulativeCost}元</p>
                </div>
                ${arrow}
            `;
        }).join('');
        container.innerHTML = journeyHtml;

        const totalCost = cumulativeCost;
        const productionCost = data.costJourney[0].cost;
        const logisticsCost = totalCost - productionCost;
        const logisticsPercentage = ((logisticsCost / totalCost) * 100).toFixed(1);

        document.getElementById('final-cost').textContent = totalCost;
        document.getElementById('logistics-percentage').textContent = `${logisticsPercentage}%`;
    }

    renderPriceHistoryChart();
    renderMacroFactorsChart();
    renderDrivers();
    renderPolicyTimeline();
    renderCostJourney();
});
</script>
</body>
</html>
