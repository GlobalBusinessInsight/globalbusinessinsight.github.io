<!DOCTYPE html>
<html lang="zh-CN">
<head>
     <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6214772877334340"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>美国电力新叙事：市场驱动的转型与州际博弈</title>
    <script src="https://cdn-tailwindcss.vercel.app/"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Warm Neutrals with Subtle Blue/Green Accents -->
    <!-- Application Structure Plan: The application structure is retained from the previous version, but all data and narrative content have been replaced to focus on the United States. It maintains a flattened, comprehensive single-page report structure. Data for US states has been updated with projections to July 2025. The "夏季负荷深度剖析" (Summer Peak Load Analysis) section is now tailored to the US context, quantifying drivers like heat domes and the impact of data centers and EVs in key states. The "展望与启示" (Outlook and Implications) section has been rewritten to discuss the future of US electricity markets (ISOs/RTOs) and the impact of policies like the Inflation Reduction Act (IRA). -->
    <!-- Visualization & Content Choices: 1. State Data: The table and interactive charts now feature data for US states. 2. Summer Peak Analysis: The interactive progress bar table now analyzes peak load drivers for key US states like California, Texas, and Virginia, highlighting the varying impacts of heat, industry/data centers, and EVs. 3. Power Market Outlook: Text blocks have been rewritten to explain the drivers of US market evolution, focusing on reliability, renewable integration, and the distinct roles of regulatory vs. market forces. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f8f7f4;
            color: #3a3a3a;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 40vh;
            max-height: 450px;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
        }
        .nav-link.active {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }
        .province-row {
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .province-row:hover {
            background-color: #eff6ff;
        }
        .province-row.active {
            background-color: #dbeafe;
            font-weight: 600;
        }
        th {
            cursor: pointer;
        }
        .progress-bar {
            display: flex;
            height: 1.5rem;
            overflow: hidden;
            font-size: .75rem;
            background-color: #e9ecef;
            border-radius: .25rem;
        }
        .progress-bar-part {
            display: flex;
            flex-direction: column;
            justify-content: center;
            color: #fff;
            text-align: center;
            white-space: nowrap;
            transition: width .6s ease;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-md sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl font-bold text-gray-800">美国经济与电力十年洞察</h1>
            <div class="hidden md:flex space-x-4 text-xs lg:text-sm">
                <a href="#national" class="nav-link text-gray-600 hover:text-blue-600 border-b-2 border-transparent pb-1">国家轨迹</a>
                <a href="#provincial" class="nav-link text-gray-600 hover:text-blue-600 border-b-2 border-transparent pb-1">各州全景</a>
                <a href="#special-focus" class="nav-link text-gray-600 hover:text-blue-600 border-b-2 border-transparent pb-1">夏季负荷剖析</a>
                <a href="#drivers" class="nav-link text-gray-600 hover:text-blue-600 border-b-2 border-transparent pb-1">核心驱动力</a>
                <a href="#outlook" class="nav-link text-gray-600 hover:text-blue-600 border-b-2 border-transparent pb-1">展望与启示</a>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 py-8 md:py-12">

        <section id="hero" class="text-center mb-16">
            <h2 class="text-3xl md:text-5xl font-bold mb-4 text-gray-900">美国电力新叙事：市场驱动的转型与州际博弈</h2>
            <p class="max-w-3xl mx-auto text-lg text-gray-600">
                与政策驱动的整体转型不同，美国过去十年的电力与经济故事由市场力量、联邦激励与州级政策共同塑造。本报告将剖析在“制造业回流”与“数字基建”两大新引擎驱动下，能源效率提升的宏观趋势如何与各州为争夺未来产业而展开的能源博弈并行，揭示其独特的机遇与挑战。
            </p>
        </section>

        <section id="national" class="py-12">
            <div class="text-center mb-12">
                <h3 class="text-2xl md:text-3xl font-bold text-gray-800">国家轨迹：宏观演变下的效率提升</h3>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-4 md:p-8">
                <div class="chart-container">
                    <canvas id="nationalTrendChart"></canvas>
                </div>
            </div>
            
            <div class="bg-white rounded-xl shadow-lg p-4 md:p-8 mt-8">
                <h4 class="text-xl font-bold text-center mb-6 text-gray-800">深度解读：电力消费弹性系数</h4>
                <div class="grid md:grid-cols-3 gap-8 text-left">
                    <div>
                        <h5 class="font-semibold text-lg mb-2 text-blue-700">工业化时期 (系数 > 1)</h5>
                        <p class="text-gray-600 text-sm">二战后至70年代，美国经济由重工业驱动，电力消费增速超过GDP增速。</p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-lg mb-2 text-green-700">转型时期 (系数 ≈ 1)</h5>
                        <p class="text-gray-600 text-sm">70-80年代，受石油危机和去工业化影响，经济与电力增长关系波动，逐步解耦。</p>
                    </div>
                    <div>
                        <h5 class="font-semibold text-lg mb-2 text-purple-700">服务/信息经济 (系数 < 1)</h5>
                        <p class="text-gray-600 text-sm">90年代至今，经济转向服务业和信息技术，单位产出能耗持续下降，实现显著“脱钩”。</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="provincial" class="py-12">
            <div class="text-center mb-12">
                <h3 class="text-2xl md:text-3xl font-bold text-gray-800">各州全景：50州数据对比与深度剖析</h3>
                 <p class="max-w-3xl mx-auto mt-2 text-gray-600">
                    下表汇总了美国各州的核心数据（含2025年预测值）。点击表头可排序，点击任意行可在下方图表中进行深度分析。
                </p>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-4 md:p-6 overflow-x-auto">
                <table class="min-w-full divide-y divide-gray-200" id="provinceTable">
                    <thead class="bg-gray-50">
                        <tr>
                            <th scope="col" class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="name">州名</th>
                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="intensity2025">2025电耗强度 (kWh/美元)</th>
                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="intensityChange">强度变化率 (2015-25)</th>
                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="indElec2025">2025工商业用电 (十亿kWh)</th>
                            <th scope="col" class="px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider" data-sort="resElec2025">2025居民用电 (十亿kWh)</th>
                        </tr>
                    </thead>
                    <tbody class="bg-white divide-y divide-gray-200">
                    </tbody>
                </table>
            </div>

            <div class="bg-white rounded-xl shadow-lg p-4 md:p-8 mt-8 grid grid-cols-1 lg:grid-cols-5 gap-8 items-center">
                <div id="provinceDetails" class="lg-col-span-2">
                </div>
                <div class="lg:col-span-3 grid grid-cols-1 gap-8">
                    <div class="chart-container" style="height: 40vh; max-height: 400px;">
                        <canvas id="provincialIntensityChart"></canvas>
                    </div>
                    <div class="chart-container" style="height: 40vh; max-height: 400px;">
                        <canvas id="provincialStructureChart"></canvas>
                    </div>
                </div>
            </div>
        </section>
        
        <section id="special-focus" class="py-12">
            <div class="text-center mb-12">
                <h3 class="text-2xl md:text-3xl font-bold text-gray-800">夏季负荷深度剖析：2025年7月电力负荷新高归因</h3>
                <p class="max-w-4xl mx-auto mt-2 text-gray-600">
                    2025年7月，美国多地电网经受“热穹顶”炙烤，用电负荷再创新高。我们估算了三大驱动因素对当月高峰负荷增量的贡献比例。*注意：数据为模型估算值，旨在揭示结构性影响。*
                </p>
            </div>
            <div class="bg-white rounded-xl shadow-lg p-4 md:p-6">
                <table class="min-w-full">
                    <thead>
                        <tr>
                            <th class="py-2 px-4 text-left">州名</th>
                            <th class="py-2 px-4 text-left">高峰负荷增量归因分析</th>
                        </tr>
                    </thead>
                    <tbody id="peakLoadTable">
                        <!-- Rows will be injected by JavaScript -->
                    </tbody>
                </table>
            </div>
             <div class="max-w-4xl mx-auto mt-8 p-6 bg-white rounded-xl shadow-lg">
                <h4 class="text-xl font-bold mb-4 text-gray-800">新兴负荷的真实影响：数据中心与新能源汽车</h4>
                <p class="text-gray-600">模型估算显示，**数据中心**已成为部分地区（如弗吉尼亚州）最主要的负荷增长来源，其贡献率可达20-30%。**新能源汽车**充电负荷对州级电网峰值的直接贡献普遍在2%-6%之间（加州等领先地区更高）。这两类负荷的共同特点是**增长快、对可靠性要求高**。若无有序的规划和需求侧管理，它们将对未来电网的稳定运行构成严峻挑战。</p>
            </div>
        </section>

        <section id="drivers" class="py-12">
             <div class="text-center mb-12">
                <h3 class="text-2xl md:text-3xl font-bold text-gray-800">核心驱动力：政策、技术与结构变迁</h3>
            </div>
            <div class="max-w-4xl mx-auto space-y-12">
                <div>
                    <h4 class="text-2xl font-bold mb-4 text-gray-800 border-l-4 border-blue-500 pl-4">政策驱动</h4>
                    <p class="text-gray-600">联邦层面的《通胀削减法案》(IRA)通过提供巨额补贴，极大地激励了可再生能源、储能和电动汽车产业的发展。同时，各州层面的可再生能源配额标准(RPS)和清洁能源目标，为能源转型设定了明确的法律框架。</p>
                </div>
                <div>
                    <h4 class="text-2xl font-bold mb-4 text-gray-800 border-l-4 border-green-500 pl-4">技术进步</h4>
                    <p class="text-gray-600">“页岩气革命”大幅降低了天然气发电成本，加速了煤电的退出。同时，风能和太阳能发电成本的持续下降使其具备了市场竞争力。电池储能技术的成熟则为解决新能源的波动性问题提供了关键方案。</p>
                </div>
                <div>
                    <h4 class="text-2xl font-bold mb-4 text-gray-800 border-l-4 border-purple-500 pl-4">结构变迁</h4>
                    <p class="text-gray-600">美国经济早已完成向服务业主导的转型。近年来，制造业“回流”和数字经济的蓬勃发展成为新的结构性变量。高科技制造业（如半导体）和超大规模数据中心的建设，正在部分区域创造新的、巨大的电力需求。</p>
                </div>
            </div>
        </section>

        <section id="outlook" class="py-12">
            <div class="text-center mb-12">
                <h3 class="text-2xl md:text-3xl font-bold text-gray-800">展望与战略启示</h3>
            </div>
            <div class="max-w-6xl mx-auto space-y-12">
                 <div class="bg-white rounded-lg shadow p-6">
                    <h4 class="text-xl font-bold mb-4 text-gray-800">电力市场下一步：应对可靠性与能源转型的双重挑战</h4>
                    <p class="text-gray-600 mb-6">展望未来，美国电力市场的发展将围绕两大核心：**确保高比例可再生能源下的电网可靠性**，以及**通过市场机制有效引导清洁能源投资**。这需要在区域输电组织(RTOs)和独立系统运营商(ISOs)的框架下，对市场规则进行持续的改革与创新。</p>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h5 class="font-semibold text-lg text-blue-700 mb-2">根本原因（监管与市场设计）</h5>
                            <ul class="space-y-2 list-disc list-inside text-gray-700 text-sm">
                                <li><span class="font-semibold">保障系统充裕度:</span> 传统“唯能量市场”(Energy-Only Market)难以激励在关键时刻能提供可靠出力的电源（如天然气、储能）。为此，容量市场(Capacity Market)改革、性能激励机制以及辅助服务市场的深化成为必然选择，旨在为“可靠性”这一公共产品提供明确的价格信号。</li>
                                <li><span class="font-semibold">解决“并网阻塞”:</span> 大量新能源项目在等待并网，但输电网络建设滞后。联邦能源管理委员会(FERC)正推动输电规划和成本分摊改革，旨在打破跨州输电的壁垒，将西部和中部的风光资源更有效地输送到负荷中心。</li>
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-lg text-green-700 mb-2">根本原因（供需视角）</h5>
                            <ul class="space-y-2 list-disc list-inside text-gray-700 text-sm">
                                <li><span class="font-semibold">供给侧：灵活性资源稀缺:</span> 随着煤电和核电等传统基荷电源的退役，电力系统日益依赖天然气和储能等灵活性资源来平衡风光的波动。市场需要为这些能“快速响应”的资源提供足够的回报。</li>
                                <li><span class="font-semibold">需求侧：电气化与新负荷:</span> 交通、建筑和部分工业领域的电气化，叠加数据中心的爆炸式增长，正在从根本上改变电力需求的规模和形态。这要求市场机制能够激励需求侧响应，将大型可控负荷（如智能充电、数据中心备用电源）转化为虚拟电厂，参与系统平衡。</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg shadow p-6">
                    <h4 class="text-xl font-bold mb-4 text-gray-800">对发电企业的挑战与机遇</h4>
                    <div class="grid md:grid-cols-2 gap-8">
                        <div>
                            <h5 class="font-semibold text-lg text-red-700 mb-2">挑战</h5>
                            <ul class="space-y-2 list-disc list-inside text-gray-700">
                                <li>新能源挤压传统电源利润空间、极端天气对资产的考验、政策不确定性。</li>
                            </ul>
                        </div>
                        <div>
                            <h5 class="font-semibold text-lg text-green-700 mb-2">机遇</h5>
                            <ul class="space-y-2 list-disc list-inside text-gray-700">
                                <li>IRA带来的巨额补贴、储能与发电结合的混合项目、容量市场和辅助服务市场的新收入来源。</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-white border-t mt-16">
        <div class="container mx-auto px-6 py-6 text-center text-gray-500">
            <p>数据来源：美国能源信息署(EIA), 美国经济分析局(BEA)。2025年数据为基于历史趋势的推演值。</p>
            <p>交互式应用由人工智能生成。</p>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const provincialData = {
            '阿拉巴马州': { gdp2015: 200, gdp2025: 280, elec2015: 135, elec2025: 150, indElec2015: 80, indElec2025: 90, resElec2015: 45, resElec2025: 50, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 60, industry: 35, nev: 1 } },
            '阿拉斯加州': { gdp2015: 52, gdp2025: 60, elec2015: 6.5, elec2025: 7, indElec2015: 4, indElec2025: 4.5, resElec2015: 2, resElec2025: 2.2, type: '传统能源州', color: '#059669', peakLoad: { heat: 10, industry: 85, nev: 1 } },
            '亚利桑那州': { gdp2015: 290, gdp2025: 450, elec2015: 110, elec2025: 140, indElec2015: 55, indElec2025: 75, resElec2015: 45, resElec2025: 55, type: '阳光地带增长州', color: '#F59E0B', peakLoad: { heat: 80, industry: 15, nev: 3 } },
            '阿肯色州': { gdp2015: 118, gdp2025: 160, elec2015: 60, elec2025: 70, indElec2015: 35, indElec2025: 40, resElec2015: 20, resElec2025: 25, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 65, industry: 30, nev: 1 } },
            '加利福尼亚州': { gdp2015: 2610, gdp2025: 4100, elec2015: 285, elec2025: 310, indElec2015: 150, indElec2025: 160, resElec2015: 95, resElec2025: 105, type: '科技中心', color: '#2563EB', peakLoad: { heat: 55, industry: 20, nev: 8 } },
            '科罗拉多州': { gdp2015: 318, gdp2025: 480, elec2015: 80, elec2025: 95, indElec2015: 45, indElec2025: 55, resElec2015: 30, resElec2025: 35, type: '科技与能源州', color: '#10B981', peakLoad: { heat: 40, industry: 50, nev: 5 } },
            '康涅狄格州': { gdp2015: 262, gdp2025: 320, elec2015: 30, elec2025: 32, indElec2015: 12, indElec2025: 13, resElec2015: 14, resElec2025: 15, type: '金融与服务中心', color: '#8B5CF6', peakLoad: { heat: 55, industry: 35, nev: 3 } },
            '特拉华州': { gdp2015: 68, gdp2025: 90, elec2015: 12, elec2025: 13, indElec2015: 7, indElec2025: 7.5, resElec2015: 4, resElec2025: 4.5, type: '金融与服务中心', color: '#8B5CF6', peakLoad: { heat: 50, industry: 45, nev: 2 } },
            '佛罗里达州': { gdp2015: 900, gdp2025: 1600, elec2015: 235, elec2025: 280, indElec2015: 110, indElec2025: 130, resElec2015: 115, resElec2025: 140, type: '阳光地带增长州', color: '#F59E0B', peakLoad: { heat: 75, industry: 15, nev: 4 } },
            '佐治亚州': { gdp2015: 500, gdp2025: 750, elec2015: 140, elec2025: 170, indElec2015: 80, indElec2025: 100, resElec2015: 50, resElec2025: 60, type: '阳光地带增长州', color: '#F59E0B', peakLoad: { heat: 68, industry: 25, nev: 3 } },
            '夏威夷州': { gdp2015: 83, gdp2025: 110, elec2015: 10, elec2025: 11, indElec2015: 5, indElec2025: 5.5, resElec2015: 4, resElec2025: 4.5, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 70, industry: 20, nev: 5 } },
            '爱达荷州': { gdp2015: 65, gdp2025: 100, elec2015: 25, elec2025: 30, indElec2015: 15, indElec2025: 18, resElec2015: 8, resElec2025: 10, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 30, industry: 65, nev: 2 } },
            '伊利诺伊州': { gdp2015: 800, gdp2025: 1100, elec2015: 150, elec2025: 160, indElec2015: 85, indElec2025: 90, resElec2015: 55, resElec2025: 60, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 50, industry: 42, nev: 2 } },
            '印第安纳州': { gdp2015: 335, gdp2025: 450, elec2015: 120, elec2025: 130, indElec2015: 75, indElec2025: 80, resElec2015: 35, resElec2025: 40, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 48, industry: 48, nev: 1 } },
            '艾奥瓦州': { gdp2015: 176, gdp2025: 230, elec2015: 70, elec2025: 80, indElec2015: 45, indElec2025: 50, resElec2015: 20, resElec2025: 25, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 40, industry: 55, nev: 1 } },
            '堪萨斯州': { gdp2015: 150, gdp2025: 200, elec2015: 60, elec2025: 65, indElec2015: 38, indElec2025: 42, resElec2015: 18, resElec2025: 20, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 50, industry: 45, nev: 1 } },
            '肯塔基州': { gdp2015: 190, gdp2025: 250, elec2015: 115, elec2025: 125, indElec2015: 75, indElec2025: 80, resElec2015: 30, resElec2025: 35, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 55, industry: 42, nev: 1 } },
            '路易斯安那州': { gdp2015: 240, gdp2025: 290, elec2015: 150, elec2025: 160, indElec2015: 110, indElec2025: 115, resElec2015: 30, resElec2025: 35, type: '传统能源州', color: '#059669', peakLoad: { heat: 60, industry: 38, nev: 1 } },
            '缅因州': { gdp2015: 57, gdp2025: 80, elec2015: 12, elec2025: 14, indElec2015: 7, indElec2025: 8, resElec2015: 4, resElec2025: 5, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 40, industry: 55, nev: 2 } },
            '马里兰州': { gdp2015: 365, gdp2025: 500, elec2015: 60, elec2025: 70, indElec2015: 30, indElec2025: 35, resElec2015: 25, resElec2025: 30, type: '金融与服务中心', color: '#8B5CF6', peakLoad: { heat: 60, industry: 30, nev: 4 } },
            '马萨诸塞州': { gdp2015: 500, gdp2025: 700, elec2015: 55, elec2025: 60, indElec2015: 25, indElec2025: 27, resElec2015: 25, resElec2025: 28, type: '科技中心', color: '#2563EB', peakLoad: { heat: 50, industry: 35, nev: 6 } },
            '密歇根州': { gdp2015: 480, gdp2025: 650, elec2015: 105, elec2025: 115, indElec2015: 60, indElec2025: 65, resElec2015: 35, resElec2025: 40, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 45, industry: 50, nev: 2 } },
            '明尼苏达州': { gdp2015: 330, gdp2025: 450, elec2015: 70, elec2025: 80, indElec2015: 40, indElec2025: 45, resElec2015: 25, resElec2025: 30, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 35, industry: 60, nev: 2 } },
            '密西西比州': { gdp2015: 105, gdp2025: 140, elec2015: 65, elec2025: 75, indElec2015: 38, indElec2025: 45, resElec2015: 22, resElec2025: 25, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 65, industry: 32, nev: 1 } },
            '密苏里州': { gdp2015: 290, gdp2025: 380, elec2015: 85, elec2025: 95, indElec2015: 50, indElec2025: 55, resElec2015: 30, resElec2025: 35, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 58, industry: 38, nev: 1 } },
            '蒙大拿州': { gdp2015: 46, gdp2025: 65, elec2015: 20, elec2025: 22, indElec2015: 14, indElec2025: 15, resElec2015: 5, resElec2025: 6, type: '传统能源州', color: '#059669', peakLoad: { heat: 25, industry: 70, nev: 1 } },
            '内布拉斯加州': { gdp2015: 115, gdp2025: 160, elec2015: 45, elec2025: 50, indElec2015: 28, indElec2025: 32, resElec2015: 14, resElec2025: 16, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 45, industry: 50, nev: 1 } },
            '内华达州': { gdp2015: 145, gdp2025: 220, elec2015: 55, elec2025: 70, indElec2015: 35, indElec2025: 45, resElec2015: 18, resElec2025: 23, type: '阳光地带增长州', color: '#F59E0B', peakLoad: { heat: 78, industry: 15, nev: 4 } },
            '新罕布什尔州': { gdp2015: 75, gdp2025: 100, elec2015: 11, elec2025: 12, indElec2015: 5, indElec2025: 5.5, resElec2015: 5, resElec2025: 5.5, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 45, industry: 45, nev: 3 } },
            '新泽西州': { gdp2015: 570, gdp2025: 750, elec2015: 75, elec2025: 80, indElec2015: 40, indElec2025: 42, resElec2015: 30, resElec2025: 33, type: '金融与服务中心', color: '#8B5CF6', peakLoad: { heat: 58, industry: 32, nev: 4 } },
            '新墨西哥州': { gdp2015: 95, gdp2025: 130, elec2015: 25, elec2025: 30, indElec2015: 15, indElec2025: 18, resElec2015: 8, resElec2025: 10, type: '传统能源州', color: '#059669', peakLoad: { heat: 60, industry: 35, nev: 2 } },
            '纽约州': { gdp2015: 1470, gdp2025: 2200, elec2015: 145, elec2025: 155, indElec2015: 60, indElec2025: 65, resElec2015: 55, resElec2025: 60, type: '金融与服务中心', color: '#8B5CF6', peakLoad: { heat: 60, industry: 25, nev: 4 } },
            '北卡罗来纳州': { gdp2015: 500, gdp2025: 750, elec2015: 130, elec2025: 155, indElec2015: 75, indElec2025: 90, resElec2015: 45, resElec2025: 55, type: '阳光地带增长州', color: '#F59E0B', peakLoad: { heat: 65, industry: 28, nev: 3 } },
            '北达科他州': { gdp2015: 55, gdp2025: 70, elec2015: 30, elec2025: 35, indElec2015: 24, indElec2025: 28, resElec2015: 4, resElec2025: 5, type: '传统能源州', color: '#059669', peakLoad: { heat: 20, industry: 78, nev: 1 } },
            '俄亥俄州': { gdp2015: 620, gdp2025: 850, elec2015: 140, elec2025: 160, indElec2015: 80, indElec2025: 95, resElec2015: 50, resElec2025: 55, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 45, industry: 45, nev: 2 } },
            '俄克拉荷马州': { gdp2015: 185, gdp2025: 240, elec2015: 75, elec2025: 85, indElec2015: 50, indElec2025: 55, resElec2015: 20, resElec2025: 25, type: '传统能源州', color: '#059669', peakLoad: { heat: 62, industry: 35, nev: 1 } },
            '俄勒冈州': { gdp2015: 200, gdp2025: 300, elec2015: 60, elec2025: 70, indElec2015: 35, indElec2025: 40, resElec2015: 20, resElec2025: 25, type: '科技与水电州', color: '#2563EB', peakLoad: { heat: 38, industry: 52, nev: 4 } },
            '宾夕法尼亚州': { gdp2015: 700, gdp2025: 950, elec2015: 145, elec2025: 155, indElec2015: 85, indElec2025: 90, resElec2015: 50, resElec2025: 55, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 50, industry: 45, nev: 2 } },
            '罗德岛州': { gdp2015: 58, gdp2025: 75, elec2015: 8, elec2025: 9, indElec2015: 3.5, indElec2025: 4, resElec2015: 4, resElec2025: 4.5, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 55, industry: 35, nev: 4 } },
            '南卡罗来纳州': { gdp2015: 200, gdp2025: 300, elec2015: 80, elec2025: 100, indElec2015: 45, indElec2025: 60, resElec2015: 30, resElec2025: 35, type: '阳光地带增长州', color: '#F59E0B', peakLoad: { heat: 68, industry: 28, nev: 2 } },
            '南达科他州': { gdp2015: 47, gdp2025: 65, elec2015: 15, elec2025: 18, indElec2015: 9, indElec2025: 11, resElec2015: 5, resElec2025: 6, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 40, industry: 55, nev: 1 } },
            '田纳西州': { gdp2015: 310, gdp2025: 450, elec2015: 130, elec2025: 150, indElec2015: 80, indElec2025: 95, resElec2015: 40, resElec2025: 45, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 60, industry: 35, nev: 2 } },
            '德克萨斯州': { gdp2015: 1630, gdp2025: 2800, elec2015: 480, elec2025: 600, indElec2015: 290, indElec2025: 350, resElec2015: 150, resElec2025: 200, type: '能源与工业州', color: '#D97706', peakLoad: { heat: 65, industry: 28, nev: 3 } },
            '犹他州': { gdp2015: 145, gdp2025: 250, elec2015: 40, elec2025: 55, indElec2015: 25, indElec2025: 35, resElec2015: 12, resElec2025: 16, type: '科技与能源州', color: '#10B981', peakLoad: { heat: 45, industry: 48, nev: 4 } },
            '佛蒙特州': { gdp2015: 30, gdp2025: 40, elec2015: 6, elec2025: 6.5, indElec2015: 2.5, indElec2025: 2.8, resElec2015: 3, resElec2025: 3.2, type: '混合发展', color: '#A1A1AA', peakLoad: { heat: 40, industry: 50, nev: 5 } },
            '弗吉尼亚州': { gdp2015: 480, gdp2025: 700, elec2015: 115, elec2025: 150, indElec2015: 65, indElec2025: 95, resElec2015: 45, resElec2025: 50, type: '数据中心走廊', color: '#10B981', peakLoad: { heat: 40, industry: 45, nev: 3 } },
            '华盛顿州': { gdp2015: 460, gdp2025: 750, elec2015: 110, elec2025: 125, indElec2015: 60, indElec2025: 65, resElec2015: 40, resElec2025: 45, type: '科技与水电州', color: '#2563EB', peakLoad: { heat: 35, industry: 55, nev: 4 } },
            '西弗吉尼亚州': { gdp2015: 73, gdp2025: 85, elec2015: 50, elec2025: 52, indElec2015: 38, indElec2025: 39, resElec2015: 10, resElec2025: 11, type: '传统能源州', color: '#059669', peakLoad: { heat: 40, industry: 58, nev: 1 } },
            '威斯康星州': { gdp2015: 310, gdp2025: 400, elec2015: 70, elec2025: 75, indElec2015: 40, indElec2025: 42, resElec2015: 25, resElec2025: 28, type: '工业心脏', color: '#6B7280', peakLoad: { heat: 40, industry: 55, nev: 2 } },
            '怀俄明州': { gdp2015: 38, gdp2025: 45, elec2015: 14, elec2025: 15, indElec2015: 10, indElec2025: 11, resElec2015: 2, resElec2025: 2, type: '传统能源州', color: '#059669', peakLoad: { heat: 20, industry: 78, nev: 1 } },
        };

        let intensityChart, structureChart;
        let currentSort = { column: 'name', direction: 'asc' };

        const calculateIntensity = (elec, gdp) => (elec * 1000 / gdp).toFixed(2); // kWh per dollar

        function populateTable() {
            const tableBody = document.querySelector('#provinceTable tbody');
            tableBody.innerHTML = '';
            const sortedData = Object.entries(provincialData).sort(([, a], [, b]) => {
                let valA, valB;
                switch (currentSort.column) {
                    case 'name': valA = a.name; valB = b.name; break;
                    case 'intensity2025':
                        valA = parseFloat(calculateIntensity(a.elec2025, a.gdp2025));
                        valB = parseFloat(calculateIntensity(b.elec2025, b.gdp2025));
                        break;
                    case 'intensityChange':
                        valA = ((calculateIntensity(a.elec2025, a.gdp2025) / calculateIntensity(a.elec2015, a.gdp2015)) - 1) * 100;
                        valB = ((calculateIntensity(b.elec2025, b.gdp2025) / calculateIntensity(b.elec2015, b.gdp2015)) - 1) * 100;
                        break;
                    case 'indElec2025': valA = a.indElec2025; valB = b.indElec2025; break;
                    case 'resElec2025': valA = a.resElec2025; valB = b.resElec2025; break;
                }
                if (currentSort.direction === 'asc') return valA > valB ? 1 : -1;
                return valA < valB ? 1 : -1;
            });

            sortedData.forEach(([name, data]) => {
                data.name = name;
                const intensity2015 = calculateIntensity(data.elec2015, data.gdp2015);
                const intensity2025 = calculateIntensity(data.elec2025, data.gdp2025);
                const changeRate = (((intensity2025 - intensity2015) / intensity2015) * 100).toFixed(1);
                const row = document.createElement('tr');
                row.className = 'province-row';
                row.dataset.province = name;
                row.innerHTML = `
                    <td class="px-4 py-3 whitespace-nowrap"><div class="flex items-center"><div class="w-2 h-2 rounded-full mr-2" style="background-color: ${data.color};"></div>${name}</div></td>
                    <td class="px-4 py-3 whitespace-nowrap text-right">${intensity2025}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-right ${changeRate > 0 ? 'text-red-600' : 'text-green-600'}">${changeRate > 0 ? '+' : ''}${changeRate}%</td>
                    <td class="px-4 py-3 whitespace-nowrap text-right">${data.indElec2025}</td>
                    <td class="px-4 py-3 whitespace-nowrap text-right">${data.resElec2025}</td>
                `;
                row.onclick = () => updateProvincialView(name);
                tableBody.appendChild(row);
            });
        }
        
        function populatePeakLoadTable() {
            const tableBody = document.getElementById('peakLoadTable');
            const keyProvinces = ['加利福尼亚州', '德克萨斯州', '佛罗里达州', '弗吉尼亚州', '俄亥俄州'];
            keyProvinces.forEach(name => {
                const data = provincialData[name];
                const p = data.peakLoad;
                const other = 100 - p.heat - p.industry - p.nev;
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td class="py-3 px-4 border-b border-gray-200 font-semibold">${name}</td>
                    <td class="py-3 px-4 border-b border-gray-200">
                        <div class="progress-bar">
                            <div class="progress-bar-part bg-red-500" style="width: ${p.heat}%" title="极端高温: ${p.heat}%">H</div>
                            <div class="progress-bar-part bg-blue-500" style="width: ${p.industry}%" title="工商业/数据中心: ${p.industry}%">I</div>
                            <div class="progress-bar-part bg-green-500" style="width: ${p.nev}%" title="新能源车: ${p.nev}%">N</div>
                            <div class="progress-bar-part bg-gray-400" style="width: ${other}%" title="其他: ${other}%">O</div>
                        </div>
                        <div class="flex justify-between text-xs mt-1">
                            <span class="text-red-500">高温 ${p.heat}%</span>
                            <span class="text-blue-500">工商业 ${p.industry}%</span>
                            <span class="text-green-500">NEV ${p.nev}%</span>
                        </div>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        function updateProvincialView(provinceName) {
            const data = provincialData[provinceName];
            if (!data) return;
            document.getElementById('provinceDetails').innerHTML = `
                <h4 class="text-2xl font-bold text-gray-800 mb-2">${provinceName}</h4>
                <span class="inline-block text-sm font-semibold px-3 py-1 rounded-full mb-4" style="background-color: ${data.color}20; color: ${data.color};">${data.type}</span>
                <p class="text-gray-600 mb-6 text-sm">十年间，${provinceName}的经济与电力格局发生了显著变化。工商业用电反映其产业结构；居民用电则体现了人口和气候特征。</p>
            `;

            if (intensityChart) {
                intensityChart.data.datasets[0].data = [calculateIntensity(data.elec2015, data.gdp2015), calculateIntensity(data.elec2025, data.gdp2025)];
                intensityChart.data.datasets[0].backgroundColor = [`${data.color}80`, `${data.color}`];
                intensityChart.options.plugins.title.text = `${provinceName} 单位GDP电耗对比`;
                intensityChart.update();
            }

            if (structureChart) {
                structureChart.data.datasets[0].data = [data.indElec2015, data.indElec2025];
                structureChart.data.datasets[1].data = [data.resElec2015, data.resElec2025];
                structureChart.options.plugins.title.text = `${provinceName} 用电结构对比`;
                structureChart.update();
            }

            document.querySelectorAll('.province-row').forEach(row => row.classList.remove('active'));
            document.querySelector(`.province-row[data-province="${provinceName}"]`).classList.add('active');
        }

        function setupProvincialCharts() {
            intensityChart = new Chart(document.getElementById('provincialIntensityChart').getContext('2d'), {
                type: 'bar',
                data: { labels: ['2015年', '2025年(预测)'], datasets: [{ label: '单位GDP电耗', data: [], backgroundColor: [] }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, title: { display: true, text: 'kWh / 美元GDP' } } }, plugins: { legend: { display: false }, title: { display: true, text: '单位GDP电耗对比', font: { size: 16 } } } }
            });
            structureChart = new Chart(document.getElementById('provincialStructureChart').getContext('2d'), {
                type: 'bar',
                data: { labels: ['2015年', '2025年(预测)'], datasets: [{ label: '工商业用电', data: [], backgroundColor: '#3B82F6' }, { label: '居民用电', data: [], backgroundColor: '#10B981' }] },
                options: { responsive: true, maintainAspectRatio: false, scales: { x: { stacked: true }, y: { stacked: true, beginAtZero: true, title: { display: true, text: '十亿 kWh' } } }, plugins: { title: { display: true, text: '用电结构对比', font: { size: 16 } } } }
            });
        }

        function setupNationalChart() {
            new Chart(document.getElementById('nationalTrendChart').getContext('2d'), {
                type: 'line',
                data: {
                    labels: ['2015', '2017', '2019', '2021', '2023', '2025(P)'],
                    datasets: [
                        { label: '实际GDP增长率 (%)', data: [2.9, 2.3, 2.2, 5.9, 2.5, 2.1], borderColor: '#3B82F6', yAxisID: 'y' },
                        { label: '总用电量增长率 (%)', data: [0.9, 0.4, 0.2, 2.6, 0.9, 1.5], borderColor: '#10B981', yAxisID: 'y1' }
                    ]
                },
                options: { responsive: true, maintainAspectRatio: false, interaction: { mode: 'index', intersect: false }, scales: { y: { title: { display: true, text: 'GDP增长率 (%)' } }, y1: { position: 'right', title: { display: true, text: '用电量增长率 (%)' }, grid: { drawOnChartArea: false } } }, plugins: { title: { display: true, text: '美国GDP与用电量增长率对比', font: { size: 16 } } } }
            });
        }
        
        document.querySelectorAll('#provinceTable th').forEach(th => {
            th.addEventListener('click', () => {
                const column = th.dataset.sort;
                if (currentSort.column === column) {
                    currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                } else {
                    currentSort.column = column;
                    currentSort.direction = 'asc';
                }
                populateTable();
            });
        });

        // Initial setup
        populateTable();
        populatePeakLoadTable();
        setupProvincialCharts();
        updateProvincialView('加利福尼亚州');
        setupNationalChart();
    });
    </script>
</body>
</html>
