<!DOCTYPE html>
<html lang="zh-CN">
<head>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6214772877334340"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>凤凰计划：瀚海精工数字化转型重生蓝图</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Warm Neutrals with Tech Blue Accent -->
    <!-- Application Structure Plan: The application is structured thematically: 1. Business Background, 2. Challenge, 3. Blueprint, 4. AI Planning Hub, 5. S&OP Hub, 6. Real-time Cost Hub, 7. Implementation Strategy (NEW), 8. Impact, 9. Journey. -->
    <!-- Visualization & Content Choices: 
        - Implementation Strategy -> NEW section with three descriptive cards explaining the unique AI-powered approach.
        - All other modules maintained and re-numbered.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #f8f7f4;
            color: #3d3d3d;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 450px;
            max-height: 60vh;
        }
        @media (max-width: 768px) {
            .chart-container {
                height: 400px;
                max-height: 70vh;
            }
        }
        .nav-link {
            transition: all 0.3s ease;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #2563eb;
            border-bottom-color: #2563eb;
        }
        .section-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .section-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -2px rgb(0 0 0 / 0.1);
        }
        .arch-module {
            transition: all 0.3s ease;
        }
        .timeline-item::before {
            content: '';
            position: absolute;
            left: -20px;
            top: 50%;
            transform: translateY(-50%);
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: #9ca3af;
            border: 2px solid #f8f7f4;
        }
        .timeline-item.active::before {
            background-color: #2563eb;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-radius: 50%;
            border-top: 4px solid #3498db;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .week-bar {
            transition: all 0.3s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header id="header" class="bg-white/80 backdrop-blur-lg sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-6 py-3 flex justify-between items-center">
            <div class="text-2xl font-bold text-gray-800">
                <span class="text-blue-600">凤凰</span>计划
            </div>
            <div class="hidden lg:flex space-x-2">
                <a href="#background" class="nav-link text-gray-600 font-medium text-xs px-1">业务背景</a>
                <a href="#challenge" class="nav-link text-gray-600 font-medium text-xs px-1">现状与挑战</a>
                <a href="#blueprint" class="nav-link text-gray-600 font-medium text-xs px-1">一体化蓝图</a>
                <a href="#ai-hub" class="nav-link text-gray-600 font-medium text-xs px-1">AI计划中枢</a>
                <a href="#sop-hub" class="nav-link text-gray-600 font-medium text-xs px-1">产销协同</a>
                <a href="#cost-hub" class="nav-link text-gray-600 font-medium text-xs px-1">实时成本核算</a>
                <a href="#strategy" class="nav-link text-gray-600 font-medium text-xs px-1">实施策略</a>
                <a href="#impact" class="nav-link text-gray-600 font-medium text-xs px-1">预期影响</a>
                <a href="#journey" class="nav-link text-gray-600 font-medium text-xs px-1">实施征途</a>
            </div>
            <button id="mobile-menu-button" class="lg:hidden focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden lg:hidden">
            <a href="#background" class="block py-2 px-4 text-sm hover:bg-gray-200">业务背景</a>
            <a href="#challenge" class="block py-2 px-4 text-sm hover:bg-gray-200">现状与挑战</a>
            <a href="#blueprint" class="block py-2 px-4 text-sm hover:bg-gray-200">一体化蓝图</a>
            <a href="#ai-hub" class="block py-2 px-4 text-sm hover:bg-gray-200">AI计划中枢</a>
            <a href="#sop-hub" class="block py-2 px-4 text-sm hover:bg-gray-200">产销协同</a>
            <a href="#cost-hub" class="block py-2 px-4 text-sm hover:bg-gray-200">实时成本核算</a>
            <a href="#strategy" class="block py-2 px-4 text-sm hover:bg-gray-200">实施策略</a>
            <a href="#impact" class="block py-2 px-4 text-sm hover:bg-gray-200">预期影响</a>
            <a href="#journey" class="block py-2 px-4 text-sm hover:bg-gray-200">实施征途</a>
        </div>
    </header>

    <main class="container mx-auto px-6 py-8 md:py-12">

        <!-- Section 1: Business Background -->
        <section id="background" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第一部分：业务背景与战略洞察</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">深刻理解瀚海精工的业务特性、市场地位与核心挑战，是“凤凰计划”成功的基石。本章节旨在描绘一幅清晰的业务全景图，阐明数字化转型的战略紧迫性。</p>
            <div class="section-card p-6 md:p-8">
                <div class="grid md:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-bold text-blue-700 mb-4">隐形冠军：行业地位与核心产品</h3>
                        <p class="text-gray-700 mb-4">瀚海精工始建于1976年，坐落于东部沿海某县，是一家在特种铸造领域深耕近五十年的民营股份制企业。作为省级认定的企业技术中心，公司在**CGI**这一细分市场占据了国内绝对的领导地位，**CGI件产能位居行业第一**，年产量超过6万吨。</p>
                        <p class="text-gray-700">其产品矩阵高度专业化，主要服务于对材料性能和可靠性要求极高的重型装备领域，包括：</p>
                        <ul class="list-disc list-inside text-gray-600 mt-2 space-y-1">
                            <li><strong>配重铁：</strong>直供日本三菱重工、美国卡特彼勒等全球工程机械巨头。</li>
                            <li><strong>轨道交通部件：</strong>为中车集团量产机车制动盘、承载鞍等核心安全件。</li>
                            <li><strong>风力发电部件：</strong>生产风电阀兰、风电机轴等，供不应求。</li>
                            <li><strong>护炉设备：</strong>远销国内外百余家大型钢厂与焦化厂。</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold text-orange-600 mb-4">光环下的挑战：高端客户与落后管理的矛盾</h3>
                        <p class="text-gray-700 mb-4">瀚海精工的客户名单堪称世界一流。服务于卡特彼勒、三菱、中车这类顶级客户，意味着必须满足其在**质量、可追溯性和准时交付**方面的严苛标准。然而，公司的内部运营管理模式，与其服务的高端市场形成了尖锐的矛盾。</p>
                        <p class="text-gray-700">核心挑战在于：</p>
                        <ul class="list-disc list-inside text-gray-600 mt-2 space-y-1">
                            <li><strong>运营模式：</strong>典型的“小批量、多品种”按单生产模式，管理复杂性高。</li>
                            <li><strong>管理手段：</strong>严重依赖人工、纸质单据进行信息传递和过程记录，效率低下且极易出错。</li>
                            <li><strong>核心矛盾：</strong>一个模拟化的、不透明的、反应迟缓的运营体系，难以持续支撑对世界级客户的高标准服务承诺。这种不匹配是公司当前面临的最大战略风险。</li>
                        </ul>
                        <p class="mt-4 text-gray-800 font-semibold">因此，“凤凰计划”的根本目的，就是通过数字化手段，拉通并升级公司的运营体系，使其与市场地位和客户要求相匹配，将运营能力从短板锻造为新的核心竞争力。</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 2: The Challenge -->
        <section id="challenge" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第二部分：增长的烦恼</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">瀚海精工凭借卓越的产品赢得了市场，但支撑运营的仍是滞后的管理模式。生产计划混乱、成本核算不清、过程追溯困难、质量依赖经验，这些问题正成为公司发展的最大瓶颈。本节将交互式地展示四大核心痛点。</p>
            <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8" id="pain-points-container"></div>
        </section>

        <!-- Section 3: The Blueprint -->
        <section id="blueprint" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第三部分：业财生产一体化平台</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">我们摒弃购买多套系统再集成的复杂模式，转而构建一个“原生一体”的“凤凰平台”。该平台拥有一个统一的数据与AI中枢，所有业务功能都围绕此核心构建，从根本上消除数据孤岛，实现业务、财务与生产的无缝协同。</p>
            <div class="flex flex-col md:flex-row items-center justify-center gap-8 max-w-6xl mx-auto">
                <div class="w-full md:w-2/3">
                    <div class="relative p-8">
                        <!-- Central Hub -->
                        <div class="absolute inset-0 flex items-center justify-center">
                            <div id="central-hub" class="bg-blue-600 text-white rounded-full w-48 h-48 flex flex-col items-center justify-center text-center p-4 shadow-2xl">
                                <h4 class="font-bold">统一数据与AI中枢</h4>
                                <p class="text-xs mt-1">单一数据源 + Gemini引擎</p>
                            </div>
                        </div>
                        <!-- Modules -->
                        <div id="arch-modules-container" class="relative w-full h-96">
                        </div>
                    </div>
                </div>
                <div id="arch-details" class="w-full md:w-1/3 p-6 section-card min-h-[320px]">
                    <h3 id="arch-module-title" class="text-xl font-bold text-blue-600 mb-2"></h3>
                    <p id="arch-module-description" class="text-gray-700 mb-4"></p>
                    <h4 class="font-semibold text-gray-800">核心功能:</h4>
                    <ul id="arch-module-functions" class="text-gray-600 text-sm list-disc list-inside"></ul>
                </div>
            </div>
        </section>

        <!-- Section 4: AI Planning Hub DEMO -->
        <section id="ai-hub" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第四部分：AI驱动的智能计划中枢</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">这是“凤凰平台”内生的智能核心。我们用Gemini AI取代传统僵化的计划模块。AI将实时从平台的统一数据库中获取信息，动态生成最优生产计划。请尝试下面的Demo，体验AI计划员的强大能力。</p>
            <div class="section-card p-6 md:p-8">
                <div class="grid md:grid-cols-2 gap-8">
                    <!-- Left Column: Inputs -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">1. 输入实时信息</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="new-order" class="block text-sm font-medium text-gray-700">紧急插单:</label>
                                <div class="flex gap-2 mt-1">
                                    <input type="text" id="order-product" value="刹车盘" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                    <input type="number" id="order-qty" value="200" class="block w-24 rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700">关键设备状态:</label>
                                <div class="mt-2 flex items-center gap-4">
                                    <span>CNC车床 #1</span>
                                    <button id="machine-status-toggle" class="relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent bg-green-500 transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2" role="switch" aria-checked="true">
                                        <span class="pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out translate-x-5"></span>
                                    </button>
                                    <span id="machine-status-text" class="text-green-600 font-semibold">在线</span>
                                </div>
                            </div>
                             <div>
                                <label for="priority-prompt" class="block text-sm font-medium text-gray-700">向AI下达指令 (可选):</label>
                                <textarea id="priority-prompt" rows="3" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm" placeholder="例如：客户A的订单最紧急，必须优先保障..."></textarea>
                            </div>
                            <button id="generate-plan-btn" class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors">
                                让 Gemini 生成计划
                            </button>
                        </div>
                    </div>
                    <!-- Right Column: Outputs -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">2. 查看AI生成的计划与洞察</h3>
                        <div id="ai-output" class="bg-gray-50 p-4 rounded-lg min-h-[300px] flex items-center justify-center">
                            <p class="text-gray-500">等待输入信息并生成计划...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 5: S&OP Hub DEMO -->
        <section id="sop-hub" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第五部分：Gemini驱动的产销协同 (S&OP)</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">将市场需求与供应能力智能匹配。Gemini将生成12周滚动计划，并能进行强大的“What-if”模拟，帮助管理层预见未来，做出更明智的战略决策。调整下方参数，体验AI如何平衡供需。</p>
            <div class="section-card p-6 md:p-8">
                <!-- Inputs -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                    <div>
                        <label for="sales-forecast-slider" class="block text-sm font-medium text-gray-700">销售预测调整: <span id="sales-forecast-value" class="font-bold text-blue-600">100%</span></label>
                        <input id="sales-forecast-slider" type="range" min="50" max="150" value="100" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div>
                        <label for="capacity-slider" class="block text-sm font-medium text-gray-700">计划产能利用率: <span id="capacity-value" class="font-bold text-blue-600">85%</span></label>
                        <input id="capacity-slider" type="range" min="50" max="100" value="85" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer">
                    </div>
                    <div>
                        <label for="procurement-cycle-input" class="block text-sm font-medium text-gray-700">关键物料采购周期 (天)</label>
                        <input type="number" id="procurement-cycle-input" value="30" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                    </div>
                </div>
                 <div class="text-center mb-8">
                     <button id="run-sop-sim-btn" class="bg-green-600 text-white font-bold py-2 px-6 rounded-lg hover:bg-green-700 transition-colors">
                        让 Gemini 进行供需模拟
                    </button>
                 </div>

                <!-- Outputs -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div>
                        <h3 class="text-xl font-bold mb-4">12周滚动计划 (需求 vs 产能)</h3>
                        <div id="rolling-plan-chart-container" class="bg-gray-50 p-4 rounded-lg h-80">
                            <canvas id="sopChart"></canvas>
                        </div>
                         <div class="flex justify-around text-xs mt-2">
                            <span class="flex items-center"><div class="w-3 h-3 bg-red-400 mr-1"></div>固定区 (W1-4)</span>
                            <span class="flex items-center"><div class="w-3 h-3 bg-yellow-400 mr-1"></div>灵活区 (W5-8)</span>
                            <span class="flex items-center"><div class="w-3 h-3 bg-green-400 mr-1"></div>开放区 (W9-12)</span>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-xl font-bold mb-4">Gemini 模拟洞察</h3>
                        <div id="sop-insights" class="bg-gray-50 p-4 rounded-lg min-h-[340px] flex items-center justify-center">
                            <p class="text-gray-500 text-center">调整参数并运行模拟以查看AI洞察...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 6: Real-time Cost Hub DEMO -->
        <section id="cost-hub" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第六部分：Gemini驱动的实时成本核算</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">告别延迟数月的成本报告。在一体化平台中，每一次生产活动的数据都会被实时捕获。Gemini能够基于这些数据和预设的成本模型，即时核算出每一批次、甚至每一个产品的精准成本，为报价和盈利分析提供前所未有的决策支持。</p>
            <div class="section-card p-6 md:p-8">
                <div class="grid md:grid-cols-3 gap-8">
                    <!-- Column 1: Cost Drivers -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">1. 设定成本动因</h3>
                        <div class="space-y-4">
                            <div>
                                <label for="electricity-price" class="block text-sm font-medium text-gray-700">电费单价 (元/度)</label>
                                <input type="number" id="electricity-price" value="0.8" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                            </div>
                            <div>
                                <label for="labor-price" class="block text-sm font-medium text-gray-700">人工成本 (元/小时)</label>
                                <input type="number" id="labor-price" value="45" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                            </div>
                            <div>
                                <label for="material-price" class="block text-sm font-medium text-gray-700">原材料成本 (元/吨)</label>
                                <input type="number" id="material-price" value="4200" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm sm:text-sm">
                            </div>
                        </div>
                    </div>
                    <!-- Column 2: Real-time Data -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">2. 获取实时过程数据</h3>
                        <div class="space-y-4">
                            <div class="bg-gray-100 p-3 rounded-lg">
                                <p class="text-sm font-medium">生产批次: <span id="batch-id" class="font-mono">--</span></p>
                                <p class="text-sm font-medium">产品: <span id="batch-product" class="font-mono">--</span></p>
                                <p class="text-sm font-medium">数量: <span id="batch-qty" class="font-mono">--</span></p>
                            </div>
                            <div id="realtime-data-display" class="space-y-2 hidden">
                                <p>总用电量: <strong id="total-electricity" class="text-blue-600 font-mono"></strong> 度</p>
                                <p>总工时: <strong id="total-labor" class="text-blue-600 font-mono"></strong> 小时</p>
                                <p>总用料: <strong id="total-material" class="text-blue-600 font-mono"></strong> 吨</p>
                            </div>
                            <button id="get-data-btn" class="w-full bg-gray-600 text-white font-bold py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors">
                                获取批次实时数据
                            </button>
                        </div>
                    </div>
                    <!-- Column 3: Cost Report -->
                    <div>
                        <h3 class="text-xl font-bold mb-4">3. 查看实时成本报告</h3>
                        <button id="calculate-cost-btn" disabled class="w-full bg-blue-600 text-white font-bold py-2 px-4 rounded-lg transition-colors disabled:bg-blue-300 disabled:cursor-not-allowed">
                            让 Gemini 核算成本
                        </button>
                        <div id="cost-output" class="bg-gray-50 p-4 rounded-lg mt-4 min-h-[200px] flex items-center justify-center">
                            <p class="text-gray-500 text-center">等待获取数据并进行核算...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 7: Implementation Strategy -->
        <section id="strategy" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第七部分：独一无二的实施策略</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">我们采用一种融合了AI时代优势的独特实施策略，旨在最大化效率、降低风险，并确保系统能与业务共同成长，而非一次性的僵化交付。</p>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="section-card p-6 text-center flex flex-col items-center">
                    <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-full bg-blue-100 text-blue-600 mb-4">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">1. 精简ERP，聚焦核心记录</h3>
                    <p class="text-gray-600">选择一款功能通用、API开放的ERP产品，仅采用其最基础、最稳定的模块（如物料主数据、BOM、客户与订单记录），将其定位为纯粹的“系统记录员”，避免陷入复杂、昂贵的定制化陷阱。</p>
                </div>
                <div class="section-card p-6 text-center flex flex-col items-center">
                    <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-full bg-green-100 text-green-600 mb-4">
                         <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">2. Gemini赋能，贯穿始终</h3>
                    <p class="text-gray-600">Gemini不仅是最终系统的智能核心，更是整个实施过程的加速器。从初步的方案设计、制作交互式原型，到生成系统代码、编写用户培训手册和策略，Gemini将作为核心支持工具，深度参与项目全生命周期。</p>
                </div>
                <div class="section-card p-6 text-center flex flex-col items-center">
                    <div class="flex-shrink-0 flex items-center justify-center h-16 w-16 rounded-full bg-yellow-100 text-yellow-600 mb-4">
                        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    </div>
                    <h3 class="text-xl font-bold mb-2">3. “三边”策略，敏捷迭代</h3>
                    <p class="text-gray-600">对于所有基于Gemini的智能模块（如产销协同、实时成本），我们采用“边设计、边使用、边改进”的敏捷策略。快速上线核心功能，让业务团队在实际使用中提出反馈，AI再根据反馈进行快速迭代优化。这是AI时代独有的优势，确保系统永远贴合业务需求。</p>
                </div>
            </div>
        </section>

        <!-- Section 8: The Impact -->
        <section id="impact" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第八部分：量化变革的价值</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">数字化转型将直接解决我们最头痛的问题。通过实时数据采集与分析，我们将大幅缩短成本核算周期，显著提升订单交付的准时性，并将运营效率转化为企业的核心竞争力。下图展示了关键指标的转型前后对比目标。</p>
            <div class="chart-container section-card p-4 md:p-6">
                <canvas id="kpiChart"></canvas>
            </div>
        </section>

        <!-- Section 9: The Journey -->
        <section id="journey" class="my-16 scroll-mt-20">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-gray-800 mb-4">第九部分：分阶段实施征途</h2>
            <p class="text-center text-lg text-gray-600 max-w-3xl mx-auto mb-12">我们采用“爬、走、跑”的策略，通过分阶段实施来管理风险、建立信心并确保成功。下面的时间轴展示了从奠基试点到迈向智能的完整路线图。点击不同阶段可查看其核心任务。</p>
            <div id="roadmap-container" class="max-w-4xl mx-auto"></div>
        </section>

    </main>

    <footer class="bg-gray-800 text-white py-8">
        <div class="container mx-auto px-6 text-center">
            <p>&copy; 2025 凤凰计划交互式蓝图。为瀚海精工数字化转型构建。</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            
            const painPointsData = [
                { title: '生产计划', icon: 'M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z', problem: '“计划靠猜”，订单频繁延误，无法准确承诺交期。', impact: '损害客户信任，丢失订单，生产线因等待或变更而闲置。', solution: '用AI计划中枢取代僵化的ERP计划模块，实现动态智能排程。' },
                { title: '成本核算', icon: 'M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v12a2 2 0 002 2z', problem: '“成本黑箱”，事后核算周期长达1-2个月。', impact: '无法为新订单提供快速准确报价，无法识别成本异常点。', solution: '一体化平台实时归集成本要素，由AI进行即时核算。' },
                { title: '过程追溯', icon: 'M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2', problem: '严重依赖脆弱的纸质“工艺卡”，追溯链条极易断裂。', impact: '质量问题无法定位到根本原因，客户审核风险高。', solution: '采用永久性激光打码+MES系统，实现一物一码全程追溯。' },
                { title: '质量管理', icon: 'M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z', problem: '手工填写纸质表格，形成大量无法分析的数据孤岛。', impact: '质量改进依赖经验而非数据，无法预防问题发生。', solution: 'MES质量管理模块，实现无纸化检验和实时SPC分析预警。' }
            ];

            const architectureData = [
                { title: '产销协同模块', description: '平台战略层，负责平衡市场需求与供应能力。由Gemini生成滚动计划并进行多场景模拟，指导资源配置。', functions: ['销售预测管理', '12周滚动计划', 'What-if情景模拟'], color: 'bg-indigo-500' },
                { title: '业务管理模块', description: '替代传统ERP，负责销售、采购、库存和基础财务核算。所有操作都基于平台的统一数据。', functions: ['销售订单管理', '采购与库存', '应收应付'], color: 'bg-green-500' },
                { title: '生产运营模块', description: '替代传统MES，负责车间的一切执行活动，实现无纸化、透明化的生产过程控制。', functions: ['生产过程追溯', '质量管理', '设备管理(OEE)'], color: 'bg-orange-500' },
                { title: '实时成本模块', description: '平台内生的成本核算引擎，实时归集生产过程中的料、工、费，由Gemini进行精准的批次成本核算与分析。', functions: ['成本动因管理', '实时成本归集', '多维度成本分析'], color: 'bg-teal-500' },
                { title: '车间设备层', description: '平台的“感官”，通过IoT、PLC、扫描枪等硬件，实时采集物理世界的真实数据，并执行指令。', functions: ['RFID/激光打码', '传感器数据采集', 'PLC/DNC控制'], color: 'bg-gray-500' }
            ];
            
            const roadmapData = [
                { phase: '第一阶段: 奠定基础与核心上线', duration: '第1-4个月', tasks: ['组建“凤凰”项目组', '完成一体化平台供应商选型', '在试点线部署RFID、激光打码等硬件', '上线平台核心模块：生产追溯、库存管理、质量管理', '开发AI计划中枢与实时成本核算原型'], milestone: '试点成功，验证核心架构与AI能力。' },
                { phase: '第二阶段: 全面部署与业务融合', duration: '第5-10个月', tasks: ['在全厂推广生产运营模块', '上线业务管理模块（销售、采购、财务）', '正式上线AI计划中枢、实时成本与产销协同模块', '实现业财生产数据完全一体化'], milestone: '全厂数字化，实现AI驱动的智能运营。' },
                { phase: '第三阶段: 优化与生态协同', duration: '第11-14个月', tasks: ['基于历史数据进行工艺优化分析', '建立基于数据的精准报价模型', '向核心客户与供应商开放协同门户'], milestone: '数据驱动决策，构建敏捷的产业生态。' }
            ];

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => { mobileMenu.classList.toggle('hidden'); });

            const painPointsContainer = document.getElementById('pain-points-container');
            painPointsData.forEach(item => {
                const card = document.createElement('div');
                card.className = 'section-card p-6 flex flex-col';
                card.innerHTML = `<div class="flex items-center mb-4"><svg class="w-8 h-8 text-blue-600 mr-4 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="${item.icon}"></path></svg><h3 class="text-xl font-bold text-gray-800">${item.title}</h3></div><div class="flex-grow"><p class="text-red-600 font-semibold mb-2">痛点: ${item.problem}</p><p class="text-orange-600 mb-3"><span class="font-semibold">影响:</span> ${item.impact}</p></div><p class="text-green-700 mt-auto"><span class="font-semibold">解决方案:</span> ${item.solution}</p>`;
                painPointsContainer.appendChild(card);
            });

            // Integrated Architecture Diagram
            const modulesContainer = document.getElementById('arch-modules-container');
            const moduleTitle = document.getElementById('arch-module-title');
            const moduleDescription = document.getElementById('arch-module-description');
            const moduleFunctions = document.getElementById('arch-module-functions');
            const totalModules = architectureData.length;
            const radius = 130; 

            architectureData.forEach((item, i) => {
                const angle = (i / totalModules) * 2 * Math.PI - (Math.PI / 2);
                const x = radius * Math.cos(angle);
                const y = radius * Math.sin(angle);

                const moduleDiv = document.createElement('div');
                moduleDiv.className = `arch-module absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ${item.color} text-white rounded-lg p-3 text-center cursor-pointer shadow-lg hover:scale-110 hover:z-10`;
                moduleDiv.style.transform = `translate(-50%, -50%) translate(${x}px, ${y}px)`;
                moduleDiv.style.width = '120px';
                moduleDiv.innerHTML = `<h5 class="font-semibold text-sm">${item.title}</h5>`;
                
                moduleDiv.addEventListener('mouseover', () => {
                    moduleTitle.textContent = item.title;
                    moduleDescription.textContent = item.description;
                    moduleFunctions.innerHTML = item.functions.map(f => `<li>${f}</li>`).join('');
                    document.getElementById('central-hub').classList.add('scale-110');
                });
                 moduleDiv.addEventListener('mouseout', () => {
                    document.getElementById('central-hub').classList.remove('scale-110');
                });
                modulesContainer.appendChild(moduleDiv);
            });
            moduleTitle.textContent = architectureData[0].title;
            moduleDescription.textContent = architectureData[0].description;
            moduleFunctions.innerHTML = architectureData[0].functions.map(f => `<li>${f}</li>`).join('');


            const generatePlanBtn = document.getElementById('generate-plan-btn');
            const aiOutputDiv = document.getElementById('ai-output');
            const machineStatusToggle = document.getElementById('machine-status-toggle');
            const machineStatusText = document.getElementById('machine-status-text');
            let isMachineOnline = true;

            machineStatusToggle.addEventListener('click', () => {
                isMachineOnline = !isMachineOnline;
                machineStatusToggle.classList.toggle('bg-green-500', isMachineOnline);
                machineStatusToggle.classList.toggle('bg-red-500', !isMachineOnline);
                machineStatusToggle.querySelector('span').classList.toggle('translate-x-5', isMachineOnline);
                machineStatusToggle.querySelector('span').classList.toggle('translate-x-0', !isMachineOnline);
                machineStatusText.textContent = isMachineOnline ? '在线' : '离线';
                machineStatusText.classList.toggle('text-green-600', isMachineOnline);
                machineStatusText.classList.toggle('text-red-600', !isMachineOnline);
            });
            
            generatePlanBtn.addEventListener('click', () => {
                aiOutputDiv.innerHTML = '<div class="loader"></div>';
                
                setTimeout(() => {
                    const product = document.getElementById('order-product').value || "未知产品";
                    const qty = document.getElementById('order-qty').value || 0;
                    const priorityPrompt = document.getElementById('priority-prompt').value;

                    let scheduleHtml = '';
                    let insights = '';

                    if (isMachineOnline) {
                        scheduleHtml = `
                            <tr class="bg-green-100"><td class="border px-4 py-2">紧急-001</td><td class="border px-4 py-2">${product}</td><td class="border px-4 py-2">${qty}</td><td class="border px-4 py-2">CNC车床 #1</td><td class="border px-4 py-2">已计划</td></tr>
                            <tr><td class="border px-4 py-2">SO-123</td><td class="border px-4 py-2">轴承座</td><td class="border px-4 py-2">500</td><td class="border px-4 py-2">CNC车床 #2</td><td class="border px-4 py-2">已计划</td></tr>
                            <tr><td class="border px-4 py-2">SO-124</td><td class="border px-4 py-2">齿轮箱体</td><td class="border px-4 py-2">300</td><td class="border px-4 py-2">CNC车床 #1</td><td class="border px-4 py-2">顺延</td></tr>
                        `;
                        insights = `已收到紧急插单。为优先生产<strong>${product}</strong>，原定在CNC车床 #1上生产的订单SO-124将顺延4小时。计划可行。`;
                    } else {
                        scheduleHtml = `
                            <tr class="bg-yellow-100"><td class="border px-4 py-2">紧急-001</td><td class="border px-4 py-2">${product}</td><td class="border px-4 py-2">${qty}</td><td class="border px-4 py-2">CNC车床 #2</td><td class="border px-4 py-2">已计划</td></tr>
                            <tr><td class="border px-4 py-2">SO-123</td><td class="border px-4 py-2">轴承座</td><td class="border px-4 py-2">500</td><td class="border px-4 py-2">CNC车床 #2</td><td class="border px-4 py-2">顺延</td></tr>
                            <tr class="bg-red-100"><td class="border px-4 py-2">SO-124</td><td class="border px-4 py-2">齿轮箱体</td><td class="border px-4 py-2">300</td><td class="border px-4 py-2">CNC车床 #1</td><td class="border px-4 py-2">暂停</td></tr>
                        `;
                        insights = `<strong class="text-red-600">警告：</strong>CNC车床 #1处于离线状态！已将紧急订单<strong>${product}</strong>转移至CNC车床 #2，但这将导致订单SO-123延误8小时。订单SO-124已暂停，等待设备恢复。`;
                    }

                    if (priorityPrompt) {
                        insights += `<br><br><strong>已考虑您的指令:</strong> "${priorityPrompt}"`;
                    }

                    aiOutputDiv.innerHTML = `
                        <div class="w-full">
                            <h4 class="font-bold mb-2">AI生成计划表:</h4>
                            <table class="table-auto w-full text-sm mb-4">
                                <thead><tr><th class="px-4 py-2">订单号</th><th class="px-4 py-2">产品</th><th class="px-4 py-2">数量</th><th class="px-4 py-2">设备</th><th class="px-4 py-2">状态</th></tr></thead>
                                <tbody>${scheduleHtml}</tbody>
                            </table>
                            <h4 class="font-bold mb-2">AI洞察与建议:</h4>
                            <p class="text-sm text-gray-700">${insights}</p>
                        </div>
                    `;
                }, 1500);
            });

            // S&OP Demo
            const salesForecastSlider = document.getElementById('sales-forecast-slider');
            const capacitySlider = document.getElementById('capacity-slider');
            const runSopSimBtn = document.getElementById('run-sop-sim-btn');
            const sopInsightsDiv = document.getElementById('sop-insights');
            const sopChartCanvas = document.getElementById('sopChart');
            let sopChart;

            function updateSliderValue(sliderId, valueId) {
                const slider = document.getElementById(sliderId);
                const valueSpan = document.getElementById(valueId);
                valueSpan.textContent = slider.value + '%';
                slider.addEventListener('input', (event) => {
                    valueSpan.textContent = event.target.value + '%';
                });
            }
            updateSliderValue('sales-forecast-slider', 'sales-forecast-value');
            updateSliderValue('capacity-slider', 'capacity-value');

            function renderSopChart(demandData, capacityData) {
                if (sopChart) {
                    sopChart.destroy();
                }
                const backgroundColors = [
                    ...Array(4).fill('rgba(239, 68, 68, 0.6)'),   // red
                    ...Array(4).fill('rgba(251, 191, 36, 0.6)'), // yellow
                    ...Array(4).fill('rgba(52, 211, 153, 0.6)')  // green
                ];
                sopChart = new Chart(sopChartCanvas, {
                    type: 'bar',
                    data: {
                        labels: Array.from({length: 12}, (_, i) => `W${i + 1}`),
                        datasets: [
                            {
                                label: '预测需求',
                                data: demandData,
                                backgroundColor: 'rgba(59, 130, 246, 0.7)',
                                borderColor: 'rgba(59, 130, 246, 1)',
                                borderWidth: 1
                            },
                            {
                                label: '计划产能',
                                data: capacityData,
                                type: 'line',
                                borderColor: 'rgba(239, 68, 68, 1)',
                                backgroundColor: 'rgba(239, 68, 68, 0.2)',
                                fill: false,
                                tension: 0.1
                            }
                        ]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        scales: {
                            y: { beginAtZero: true, ticks: { callback: (value) => value + '吨' } },
                            x: { stacked: true }
                        },
                        plugins: {
                            tooltip: { mode: 'index', intersect: false },
                            title: { display: false }
                        }
                    }
                });
            }
            
            runSopSimBtn.addEventListener('click', () => {
                sopInsightsDiv.innerHTML = '<div class="loader"></div>';
                
                const baseDemand = [100, 110, 105, 120, 130, 125, 140, 135, 150, 145, 160, 155];
                const salesMultiplier = parseInt(salesForecastSlider.value) / 100;
                const capacityUtilization = parseInt(capacitySlider.value) / 100;
                const procurementCycle = parseInt(document.getElementById('procurement-cycle-input').value);

                const demand = baseDemand.map(d => Math.round(d * salesMultiplier));
                const capacity = Array(12).fill(Math.round(150 * capacityUtilization));

                renderSopChart(demand, capacity);

                setTimeout(() => {
                    let insights = '';
                    const capacityGap = demand.map((d, i) => d - capacity[i]);
                    const problemWeeks = capacityGap.map((gap, i) => gap > 0 ? i + 1 : -1).filter(w => w !== -1);
                    
                    if (problemWeeks.length > 0) {
                        const firstProblemWeek = problemWeeks[0];
                        insights += `<p class="mb-2"><strong class="text-red-600">警告：</strong>检测到从第 <strong>${firstProblemWeek}</strong> 周开始出现产能缺口。</p>`;
                        if (procurementCycle > (firstProblemWeek - 1) * 7) {
                             insights += `<p class="mb-2">关键物料采购周期为 <strong>${procurementCycle}</strong> 天，现在为第 <strong>${firstProblemWeek}</strong> 周的产能问题做准备可能为时已晚。</p>`;
                        }
                        insights += `<p class="mb-2"><strong>建议措施：</strong></p>
                                    <ul class="list-disc list-inside text-sm space-y-1">
                                        <li>立即审查第 <strong>${problemWeeks.join(', ')}</strong> 周的订单优先级。</li>
                                        <li>考虑在第 <strong>${firstProblemWeek - 2}</strong> 周到第 <strong>${firstProblemWeek - 1}</strong> 周增加周末加班班次。</li>
                                        <li>评估将部分非核心工序外包的可能性。</li>
                                    </ul>`;
                    } else {
                        insights = `<p class="text-green-600 font-semibold">供需平衡：</p><p>在当前销售预测和产能利用率下，未来12周供需平衡，无明显产能缺口。库存水平将保持在健康范围。这是一个理想的计划状态。</p>`;
                    }
                    sopInsightsDiv.innerHTML = `<div class="w-full text-sm">${insights}</div>`;
                }, 1500);
            });
            
            // Real-time Costing Demo
            const getDataBtn = document.getElementById('get-data-btn');
            const calculateCostBtn = document.getElementById('calculate-cost-btn');
            const costOutputDiv = document.getElementById('cost-output');

            getDataBtn.addEventListener('click', () => {
                const batchIdSpan = document.getElementById('batch-id');
                const batchProductSpan = document.getElementById('batch-product');
                const batchQtySpan = document.getElementById('batch-qty');
                const realtimeDataDisplay = document.getElementById('realtime-data-display');
                
                batchIdSpan.textContent = 'BZ-20250809-001';
                batchProductSpan.textContent = '刹车盘';
                batchQtySpan.textContent = '200 件';

                document.getElementById('total-electricity').textContent = (Math.random() * (1500 - 1200) + 1200).toFixed(2);
                document.getElementById('total-labor').textContent = (Math.random() * (30 - 25) + 25).toFixed(2);
                document.getElementById('total-material').textContent = (Math.random() * (2.5 - 2.2) + 2.2).toFixed(2);
                
                realtimeDataDisplay.classList.remove('hidden');
                calculateCostBtn.disabled = false;
                costOutputDiv.innerHTML = '<p class="text-gray-500 text-center">数据已就绪，请核算成本。</p>';
            });

            calculateCostBtn.addEventListener('click', () => {
                costOutputDiv.innerHTML = '<div class="loader"></div>';

                setTimeout(() => {
                    const elecPrice = parseFloat(document.getElementById('electricity-price').value);
                    const laborPrice = parseFloat(document.getElementById('labor-price').value);
                    const materialPrice = parseFloat(document.getElementById('material-price').value);

                    const totalElec = parseFloat(document.getElementById('total-electricity').textContent);
                    const totalLabor = parseFloat(document.getElementById('total-labor').textContent);
                    const totalMaterial = parseFloat(document.getElementById('total-material').textContent);

                    const elecCost = totalElec * elecPrice;
                    const laborCost = totalLabor * laborPrice;
                    const materialCost = totalMaterial * materialPrice;
                    const totalCost = elecCost + laborCost + materialCost;
                    const unitCost = totalCost / 200;

                    costOutputDiv.innerHTML = `
                        <div class="w-full text-sm">
                            <h4 class="font-bold mb-2 text-base">批次 BZ-20250809-001 成本报告</h4>
                            <div class="space-y-1 mb-3">
                                <p>物料成本: <span class="font-mono float-right">¥ ${materialCost.toFixed(2)}</span></p>
                                <p>人工成本: <span class="font-mono float-right">¥ ${laborCost.toFixed(2)}</span></p>
                                <p>能源成本: <span class="font-mono float-right">¥ ${elecCost.toFixed(2)}</span></p>
                                <hr class="my-1">
                                <p class="font-bold">批次总成本: <span class="font-mono float-right">¥ ${totalCost.toFixed(2)}</span></p>
                                <p class="font-bold text-blue-600">单件成本: <span class="font-mono float-right">¥ ${unitCost.toFixed(2)}</span></p>
                            </div>
                            <h4 class="font-bold mb-1 text-base">Gemini洞察:</h4>
                            <p class="text-xs text-gray-700 bg-blue-50 p-2 rounded">本次生产的物料成本占比最高 (${((materialCost/totalCost)*100).toFixed(0)}%)。建议与供应商协商长期采购协议以降低单价。</p>
                        </div>
                    `;

                }, 1500);
            });


            const kpiCtx = document.getElementById('kpiChart').getContext('2d');
            new Chart(kpiCtx, { type: 'bar', data: { labels: ['订单准时交付率 (OTD)', '一次通过率 (FPY)', '综合设备效率 (OEE)', '成本核算周期 (天)'], datasets: [ { label: '现状估算', data: [70, 85, 40, 45], backgroundColor: 'rgba(255, 99, 132, 0.5)', borderColor: 'rgba(255, 99, 132, 1)', borderWidth: 1 }, { label: '转型后目标', data: [98, 98, 75, 2], backgroundColor: 'rgba(54, 162, 235, 0.5)', borderColor: 'rgba(54, 162, 235, 1)', borderWidth: 1 } ] }, options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: true, } }, plugins: { title: { display: true, text: '核心业务KPIs转型目标', font: { size: 18 } }, tooltip: { callbacks: { label: function(context) { let label = context.dataset.label || ''; if (label) { label += ': '; } if (context.parsed.y !== null) { let value = context.parsed.y; if (context.label.includes('%') || context.label.includes('率')) { label += value + '%'; } else { label += value; } } return label; } } } } } });
            
            const roadmapContainer = document.getElementById('roadmap-container');
            roadmapData.forEach((item, index) => {
                const phaseDiv = document.createElement('div');
                phaseDiv.className = 'relative pl-8 pb-8 border-l-2 border-gray-300 timeline-item';
                phaseDiv.innerHTML = `<div class="cursor-pointer"><h4 class="text-xl font-bold text-gray-800">${item.phase}</h4><p class="text-sm text-gray-500 mb-2">${item.duration}</p><p class="font-semibold text-blue-600">里程碑: ${item.milestone}</p></div><div class="mt-4 pl-4 border-l-2 border-dashed border-gray-300 hidden tasks-details"><h5 class="font-semibold mb-2">核心任务:</h5><ul class="list-disc list-inside text-gray-600 space-y-1">${item.tasks.map(task => `<li>${task}</li>`).join('')}</ul></div>`;
                roadmapContainer.appendChild(phaseDiv);
                phaseDiv.querySelector('.cursor-pointer').addEventListener('click', () => { phaseDiv.querySelector('.tasks-details').classList.toggle('hidden'); phaseDiv.classList.toggle('active'); });
                if (index === 0) { phaseDiv.querySelector('.tasks-details').classList.remove('hidden'); phaseDiv.classList.add('active'); }
            });

            const sections = document.querySelectorAll('section');
            const navLinks = document.querySelectorAll('header a.nav-link');
            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 100) { current = section.getAttribute('id'); }
                });
                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').includes(current)) { link.classList.add('active'); }
                });
            });

            // Initial chart render
            runSopSimBtn.click();
        });
    </script>
</body>
</html>
