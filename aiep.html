<!DOCTYPE html>
<html lang="zh-CN">
<head>
 <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6214772877334340"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Exxonmobil AI Exploration Platform (原理性Demo)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;700&family=Noto+Serif+SC:wght@500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: ExxonMobil Corporate Tech -->
    <!-- Application Structure Plan: A simulated, multi-pane dashboard application. The layout is divided into four main interactive sections corresponding to the functional architecture layers: 1. Data Layer (simulated data sources). 2. Physics Layer (interactive eFWI demo). 3. AI Layer (tabbed demos for different AI interpretation tasks). 4. Decision Layer (interactive map for risk analysis and well planning). This task-oriented structure allows the user to "walk through" the entire exploration workflow, making the complex process tangible and understandable. -->
    <!-- Visualization & Content Choices: Data Layer: HTML/CSS diagram. Physics Layer (eFWI Demo): Canvas API and Chart.js to visualize the iterative optimization. AI Layer: Canvas API to show "before" and "after" interpretation results for faults, lithology, and reservoir parameters. Decision Layer: An interactive Canvas map where users can click to see risk profiles and simulate well placement, with results displayed dynamically. All visualizations are custom-built to be highly interactive and illustrative, without using SVG or Mermaid JS. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans SC', sans-serif;
            background-color: #eef2f6;
            color: #1a1a1a;
        }
        h1, h2, h3, h4, h5 {
            font-family: 'Noto Serif SC', serif;
        }
        .main-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 1.5rem;
        }
        @media (min-width: 1024px) {
            .main-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        .grid-card {
            background-color: #ffffff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -2px rgba(0, 0, 0, 0.05);
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
        }
        .grid-card-full {
            grid-column: 1 / -1;
        }
        .card-title {
            font-size: 1.25rem;
            font-weight: 700;
            color: #002776; /* ExxonMobil Blue */
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 2px solid #f0f0f0;
        }
        .tab-button {
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: all 0.2s ease-in-out;
            cursor: pointer;
        }
        .tab-button.active {
            background-color: #002776;
            color: white;
        }
        .demo-canvas {
            border: 1px solid #d1d5db;
            width: 100%;
            height: auto;
            aspect-ratio: 16 / 9;
            background-color: #f9fafb;
        }
        .btn-primary {
            background-color: #d90000; /* ExxonMobil Red */
            color: white;
            font-weight: bold;
            padding: 0.5rem 1.5rem;
            border-radius: 0.375rem;
            transition: background-color 0.3s;
        }
        .btn-primary:hover {
            background-color: #b90000;
        }
        .btn-primary:disabled {
            background-color: #f87171;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="p-4 md:p-6 lg:p-8">

    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-[#002776]">埃克森美孚AI勘探决策平台 (交互式Demo)</h1>
            <p class="text-lg text-gray-600 mt-2">一个模拟从原始数据到钻井决策的全流程可视化平台</p>
        </header>

        <div class="main-container">
            <!-- 1. Data Layer -->
            <div class="grid-card">
                <h3 class="card-title">1. 数据采集与管理层 (数据基础)</h3>
                <p class="text-sm text-gray-600 mb-4">系统的基石，负责整合多源异构数据，为上层分析提供高质量的“原料”。</p>
                <div class="flex-grow flex flex-col justify-center items-center p-4 bg-gray-50 rounded-md">
                    <div class="text-center mb-2"><strong>统一数据湖</strong></div>
                    <div class="w-full h-1 bg-gray-300 mb-2"></div>
                    <div class="flex justify-around w-full">
                        <div class="text-center text-sm">
                            <div class="text-2xl">📜</div><div>地震数据</div>
                        </div>
                        <div class="text-center text-sm">
                            <div class="text-2xl">📈</div><div>测井数据</div>
                        </div>
                        <div class="text-center text-sm">
                            <div class="text-2xl">🪨</div><div>地质数据</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 2. Physics Layer -->
            <div class="grid-card">
                <h3 class="card-title">2. 物理建模层 (eFWI Demo)</h3>
                <p class="text-sm text-gray-600 mb-4">利用物理信息神经网络(PINN)进行eFWI反演，将模糊的原始数据转化为高清的地下物理模型。</p>
                <div class="flex-grow grid grid-cols-1 sm:grid-cols-2 gap-4">
                    <div>
                        <h5 class="font-bold text-center text-sm mb-1">AI模型 (速度场)</h5>
                        <canvas id="efwi-model-canvas" class="w-full h-auto aspect-square border"></canvas>
                    </div>
                    <div>
                        <h5 class="font-bold text-center text-sm mb-1">损失函数</h5>
                        <div class="h-full flex flex-col justify-center space-y-4">
                            <div>
                                <label class="text-xs font-medium">数据失配损失</label>
                                <div class="w-full bg-gray-200 rounded-full h-2"><div id="data-loss-bar" class="bg-blue-600 h-2 rounded-full" style="width: 100%"></div></div>
                            </div>
                            <div>
                                <label class="text-xs font-medium">物理残差损失</label>
                                <div class="w-full bg-gray-200 rounded-full h-2"><div id="physics-loss-bar" class="bg-red-600 h-2 rounded-full" style="width: 100%"></div></div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="text-center mt-4">
                    <button id="start-efwi-btn" class="btn-primary text-sm">启动eFWI反演</button>
                    <div id="efwi-iter-counter" class="text-xs mt-1 text-gray-500">迭代: 0</div>
                </div>
            </div>

            <!-- 3. AI Layer -->
            <div class="grid-card grid-card-full">
                <h3 class="card-title">3. AI解释与分析层 (智能大脑)</h3>
                <div class="flex justify-center mb-4">
                    <div class="flex flex-wrap justify-center gap-2 bg-gray-100 p-1 rounded-full text-sm">
                        <button class="ai-tab-btn tab-button active" data-tab="fault">自动化结构解释</button>
                        <button class="ai-tab-btn tab-button" data-tab="lithology">自动化岩性识别</button>
                        <button class="ai-tab-btn tab-button" data-tab="reservoir">储层参数预测</button>
                    </div>
                </div>
                <div id="ai-demo-content" class="flex-grow"></div>
            </div>
            
            <!-- 4. Decision Layer -->
            <div class="grid-card grid-card-full">
                <h3 class="card-title">4. 决策支持层 (钻井目标优化)</h3>
                <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <div class="lg:col-span-2">
                        <p class="text-sm text-gray-600 mb-2">在AI解释的地质模型上进行交互式分析。点击地图上的不同区域，查看风险评估并规划最优钻井靶点。</p>
                        <canvas id="decision-map-canvas" class="demo-canvas cursor-pointer"></canvas>
                    </div>
                    <div id="decision-panel" class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-bold text-lg mb-2">风险与不确定性分析</h4>
                        <p class="text-sm text-gray-500 mb-4">请在左侧地图上选择一个勘探目标点...</p>
                        <div id="risk-analysis-content" class="hidden">
                            <h5 class="font-semibold">目标点: <span id="target-coords"></span></h5>
                            <div class="my-4">
                                <h6 class="text-sm font-bold mb-1">储层品质概率</h6>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div id="reservoir-quality-bar" class="bg-green-500 h-4 rounded-full text-white text-xs flex items-center justify-center"></div></div>
                            </div>
                             <div class="my-4">
                                <h6 class="text-sm font-bold mb-1">含油气概率</h6>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div id="hydrocarbon-prob-bar" class="bg-yellow-500 h-4 rounded-full text-white text-xs flex items-center justify-center"></div></div>
                            </div>
                             <div class="my-4">
                                <h6 class="text-sm font-bold mb-1">钻遇断层风险</h6>
                                <div class="w-full bg-gray-200 rounded-full h-4"><div id="fault-risk-bar" class="bg-red-500 h-4 rounded-full text-white text-xs flex items-center justify-center"></div></div>
                            </div>
                            <hr class="my-4">
                            <h4 class="font-bold text-lg mb-2">钻井目标优化</h4>
                            <p id="drilling-suggestion" class="text-sm text-gray-700"></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // --- DATA & STATE ---
            const W = 256, H = 128; // Canvas dimensions
            const groundTruthModel = new Float32Array(W * H);
            
            function drawBaseModel(ctx) {
                const imageData = ctx.createImageData(W, H);
                for (let i = 0; i < groundTruthModel.length; i++) {
                    const value = groundTruthModel[i];
                    let r, g, b;
                    if (value < 0.3) { r = 60; g = 90; b = 180; }
                    else if (value < 0.5) { r = 90; g = 150; b = 220; }
                    else if (value < 0.7) { r = 255; g = 215; b = 0; }
                    else { r = 180; g = 200; b = 230; }
                    imageData.data[i * 4] = r;
                    imageData.data[i * 4 + 1] = g;
                    imageData.data[i * 4 + 2] = b;
                    imageData.data[i * 4 + 3] = 255;
                }
                ctx.putImageData(imageData, 0, 0);
            }

            const demos = {
                fault: {
                    title: "自动化结构解释 (断层识别)",
                    description: "AI (U-Net模型) 快速处理eFWI生成的高精度速度模型，自动识别和提取三维数据体中所有高概率的断裂网络。",
                    draw: (ctxBefore, ctxAfter) => {
                        drawBaseModel(ctxBefore);
                        drawBaseModel(ctxAfter);
                        // Draw faults on after canvas
                        ctxAfter.beginPath();
                        ctxAfter.moveTo(W * 0.22, H * 0.1);
                        ctxAfter.lineTo(W * 0.22, H);
                        ctxAfter.moveTo(W * 0.72, H * 0.2);
                        ctxAfter.lineTo(W * 0.72, H);
                        ctxAfter.lineWidth = 2;
                        ctxAfter.strokeStyle = '#d90000';
                        ctxAfter.shadowColor = 'black';
                        ctxAfter.shadowBlur = 4;
                        ctxAfter.stroke();
                    }
                },
                lithology: {
                    title: "自动化岩性识别 (河道砂体)",
                    description: "训练专门的AI模型来识别和勾画蜿蜒河道等有利储集体。AI能精确界定砂体的空间展布，是寻找“甜点”的关键。",
                    draw: (ctxBefore, ctxAfter) => {
                        drawBaseModel(ctxBefore);
                        drawBaseModel(ctxAfter);
                        // Draw channel on after canvas
                        ctxAfter.beginPath();
                        for(let x=0; x < W; x++) {
                            let channelY = H * 0.5 + Math.sin(x / (W/8)) * 10;
                            if (x === 0) ctxAfter.moveTo(x, channelY);
                            else ctxAfter.lineTo(x, channelY);
                        }
                        ctxAfter.lineWidth = 10;
                        ctxAfter.strokeStyle = 'rgba(251, 191, 36, 0.8)';
                        ctxAfter.lineCap = 'round';
                        ctxAfter.stroke();
                    }
                },
                reservoir: {
                    title: "储层参数预测 (孔隙度)",
                    description: "融合eFWI模型、测井数据和岩心分析，AI可以直接预测井间的储层参数（如孔隙度）分布，指导开发方案。",
                     draw: (ctxBefore, ctxAfter) => {
                        drawBaseModel(ctxBefore);
                        // Draw porosity map
                        const imageData = ctxAfter.createImageData(W, H);
                        for (let y = 0; y < H; y++) {
                            for (let x = 0; x < W; x++) {
                                const i = y * W + x;
                                let channelY = H * 0.5 + Math.sin(x / (W/8)) * 10;
                                let porosity = 0;
                                if (y > channelY - 5 && y < channelY + 5) {
                                    porosity = 0.3 * (1 - Math.abs(y - channelY)/5);
                                }
                                const r = 255 * porosity;
                                const b = 255 * (1 - porosity);
                                imageData.data[i * 4] = r;
                                imageData.data[i * 4 + 1] = 100;
                                imageData.data[i * 4 + 2] = b;
                                imageData.data[i * 4 + 3] = 255;
                            }
                        }
                        ctxAfter.putImageData(imageData, 0, 0);
                    }
                }
            };

            // --- INITIALIZATION ---
            function init() {
                createGroundTruthModel();
                setupEFwidemo();
                setupAIdemo();
                setupDecisionDemo();
            }

            function createGroundTruthModel() {
                 for (let y = 0; y < H; y++) {
                    for (let x = 0; x < W; x++) {
                        let value = 0.2; // Layer 1
                        if (y > H * 0.3) value = 0.4;
                        if (y > H * 0.65) value = 0.8;
                        if (x > W*0.2 && x < W*0.25 && y > H*0.1) value = groundTruthModel[y * W + x - 3];
                        if (x > W*0.7 && x < W*0.75 && y > H*0.2) value = groundTruthModel[y * W + x - 2];
                        let channelY = H * 0.5 + Math.sin(x / (W/8)) * 10;
                        if (y > channelY - 5 && y < channelY + 5) value = 0.6;
                        groundTruthModel[y * W + x] = value;
                    }
                }
            }

            // --- EFWI DEMO ---
            function setupEFwidemo() {
                const btn = document.getElementById('start-efwi-btn');
                const modelCanvas = document.getElementById('efwi-model-canvas');
                const dataLossBar = document.getElementById('data-loss-bar');
                const physicsLossBar = document.getElementById('physics-loss-bar');
                const iterCounter = document.getElementById('efwi-iter-counter');
                let animationFrameId;

                function draw(canvas, modelData) {
                    const ctx = canvas.getContext('2d');
                    canvas.width = W; canvas.height = H;
                    const imageData = ctx.createImageData(W, H);
                    for (let i = 0; i < modelData.length; i++) {
                        const value = Math.floor(modelData[i] * 255);
                        imageData.data[i * 4] = value;
                        imageData.data[i * 4 + 1] = value;
                        imageData.data[i * 4 + 2] = 200;
                        imageData.data[i * 4 + 3] = 255;
                    }
                    ctx.putImageData(imageData, 0, 0);
                }

                function reset() {
                    cancelAnimationFrame(animationFrameId);
                    btn.textContent = "启动eFWI反演";
                    btn.disabled = false;
                    dataLossBar.style.width = '100%';
                    physicsLossBar.style.width = '100%';
                    iterCounter.textContent = '迭代: 0';
                    draw(modelCanvas, new Float32Array(W * H).fill(0.5));
                }

                function run() {
                    let iteration = 0;
                    const totalIterations = 150;
                    let currentModel = new Float32Array(W * H).fill(0.5);
                    
                    function animate() {
                        if (iteration > totalIterations) {
                            btn.textContent = "重置";
                            btn.disabled = false;
                            return;
                        }
                        for (let i = 0; i < currentModel.length; i++) {
                            currentModel[i] += (groundTruthModel[i] - currentModel[i]) * 0.1;
                        }
                        draw(modelCanvas, currentModel);
                        const progress = 1 - (iteration / totalIterations);
                        dataLossBar.style.width = `${progress * 100 * (1 + 0.2 * Math.random())}%`;
                        physicsLossBar.style.width = `${progress * 100 * (1 + 0.3 * Math.random())}%`;
                        iterCounter.textContent = `迭代: ${iteration}`;
                        iteration++;
                        animationFrameId = requestAnimationFrame(animate);
                    }
                    animate();
                }

                btn.addEventListener('click', () => {
                    if (btn.textContent.includes('重置')) {
                        reset();
                    } else {
                        btn.disabled = true;
                        btn.textContent = "反演中...";
                        run();
                    }
                });
                reset();
            }
            
            // --- AI DEMO ---
            function setupAIdemo() {
                const contentEl = document.getElementById('ai-demo-content');
                const tabs = document.querySelectorAll('.ai-tab-btn');
                
                function updateContent(key) {
                    const demo = demos[key];
                    contentEl.innerHTML = `
                        <div class="fade-in">
                            <h4 class="text-lg font-bold text-center">${demo.title}</h4>
                            <p class="text-sm text-center text-gray-600 mb-4">${demo.description}</p>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="text-center">
                                    <h5 class="font-semibold text-sm mb-1">处理前 (eFWI模型)</h5>
                                    <canvas id="ai-before-canvas" class="demo-canvas"></canvas>
                                </div>
                                <div class="text-center">
                                    <h5 class="font-semibold text-sm mb-1">AI解释后</h5>
                                    <canvas id="ai-after-canvas" class="demo-canvas"></canvas>
                                </div>
                            </div>
                        </div>
                    `;
                    const beforeCanvas = document.getElementById('ai-before-canvas');
                    const afterCanvas = document.getElementById('ai-after-canvas');
                    beforeCanvas.width = afterCanvas.width = W;
                    beforeCanvas.height = afterCanvas.height = H;
                    demo.draw(beforeCanvas.getContext('2d'), afterCanvas.getContext('2d'));
                }

                tabs.forEach(tab => {
                    tab.addEventListener('click', () => {
                        tabs.forEach(t => t.classList.remove('active'));
                        tab.classList.add('active');
                        updateContent(tab.dataset.tab);
                    });
                });
                updateContent('fault');
            }
            
            // --- DECISION DEMO ---
            function setupDecisionDemo() {
                const canvas = document.getElementById('decision-map-canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = W; canvas.height = H;
                
                const panel = document.getElementById('risk-analysis-content');
                const coordsEl = document.getElementById('target-coords');
                const qualityBar = document.getElementById('reservoir-quality-bar');
                const hydrocarbonBar = document.getElementById('hydrocarbon-prob-bar');
                const faultRiskBar = document.getElementById('fault-risk-bar');
                const suggestionEl = document.getElementById('drilling-suggestion');

                // Draw base map (interpreted result)
                const interpretedCtx = document.createElement('canvas').getContext('2d');
                interpretedCtx.canvas.width = W; interpretedCtx.canvas.height = H;
                demos.fault.draw(interpretedCtx, interpretedCtx);
                demos.lithology.draw(interpretedCtx, interpretedCtx);
                ctx.drawImage(interpretedCtx.canvas, 0, 0);

                canvas.addEventListener('click', (e) => {
                    const rect = canvas.getBoundingClientRect();
                    const scaleX = canvas.width / rect.width;
                    const scaleY = canvas.height / rect.height;
                    const x = Math.round((e.clientX - rect.left) * scaleX);
                    const y = Math.round((e.clientY - rect.top) * scaleY);
                    
                    updateDecisionPanel(x, y);
                    
                    // Draw marker
                    ctx.drawImage(interpretedCtx.canvas, 0, 0); // Redraw base
                    ctx.beginPath();
                    ctx.arc(x, y, 5, 0, 2 * Math.PI);
                    ctx.fillStyle = 'rgba(255, 0, 0, 0.8)';
                    ctx.fill();
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                });

                function updateDecisionPanel(x, y) {
                    panel.classList.remove('hidden');
                    coordsEl.textContent = `X: ${x}, Y: ${y}`;
                    
                    // Simplified risk calculation based on ground truth model
                    let channelY = H * 0.5 + Math.sin(x / (W/8)) * 10;
                    const inChannel = y > channelY - 5 && y < channelY + 5;
                    const nearFault = (x > W*0.2 && x < W*0.25) || (x > W*0.7 && x < W*0.75);

                    const quality = inChannel ? 70 + Math.random()*20 : 10 + Math.random()*20;
                    const hydrocarbon = inChannel ? 60 + Math.random()*25 : 5 + Math.random()*15;
                    const faultRisk = nearFault ? 80 + Math.random()*15 : 5 + Math.random()*10;

                    qualityBar.style.width = `${quality}%`;
                    qualityBar.textContent = `${Math.round(quality)}%`;
                    hydrocarbonBar.style.width = `${hydrocarbon}%`;
                    hydrocarbonBar.textContent = `${Math.round(hydrocarbon)}%`;
                    faultRiskBar.style.width = `${faultRisk}%`;
                    faultRiskBar.textContent = `${Math.round(faultRisk)}%`;

                    if (quality > 60 && hydrocarbon > 50 && faultRisk < 30) {
                        suggestionEl.textContent = "建议：高优先级钻井目标。储层品质和含油气概率高，且远离主要断裂带，风险可控。";
                        suggestionEl.className = "text-sm text-green-700 font-semibold";
                    } else if (faultRisk > 70) {
                        suggestionEl.textContent = "建议：高风险目标。钻遇断层风险极高，可能导致钻井复杂情况和储层密封性问题，建议避开。";
                        suggestionEl.className = "text-sm text-red-700 font-semibold";
                    } else {
                        suggestionEl.textContent = "建议：低优先级目标。储层品质或含油气概率较低，经济效益不确定，建议进一步评估。";
                        suggestionEl.className = "text-sm text-yellow-700 font-semibold";
                    }
                }
            }
            
            init();
        });
    </script>
</body>
</html>
