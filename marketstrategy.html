<!DOCTYPE html>
<html lang="zh-CN">
<head>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6214772877334340"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>外贸营销服务客户数据与增长战略仪表板</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
    <!-- Chosen Palette: Professional Teal & Warm Neutrals -->
    <!-- Application Structure Plan: A two-tiered navigation system is implemented. The primary navigation switches between two core modes: '数据洞察 (Data Insights)' and '战略规划 (Strategic Planning)'. The secondary navigation (sub-tabs) allows exploration within each mode. A new '目标客户清单' tab has been added under '战略规划', featuring interactive search and filtering for a list of over 500 potential clients. This structure provides a seamless flow from high-level data analysis to actionable strategic planning and lead generation. -->
    <!-- Visualization & Content Choices:
        - All charts (Donut, Bar, Radar, Scatter) from previous versions are integrated to provide a full data picture. Library: Chart.js.
        - All interactive timelines for sales, product, and market plans are included to visualize processes. Method: HTML/CSS/JS.
        - All persona cards and diagnostic summaries are included to provide qualitative insights. Method: HTML/Tailwind.
        - A new interactive table for the 500+ target customers is implemented with search and filter functionality to ensure usability. Method: Vanilla JS.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', 'Helvetica Neue', 'Helvetica', 'Arial', 'sans-serif';
        }
        .main-tab-active {
            background-color: #0d9488; /* teal-600 */
            color: white;
        }
        .sub-tab-active {
            border-color: #0d9488; /* teal-600 */
            color: #0d9488;
            background-color: #f0fdfa; /* teal-50 */
        }
        .timeline-item-active button {
            background-color: #0d9488; /* teal-600 */
            color: white;
        }
        .timeline-item-active .timeline-content {
            max-height: 500px;
            opacity: 1;
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 450px;
        }
        #target-customer-table-container {
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="bg-slate-100 text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">外贸营销服务客户数据与增长战略仪表板</h1>
            <p class="text-slate-600 mt-2">一个从数据分析到战略执行的完整决策支持系统 (宁波地区B2B业务版)</p>
        </header>

        <!-- Main Navigation -->
        <div class="flex justify-center mb-8 bg-slate-200 p-1 rounded-lg">
            <button data-main-tab="insights" class="main-tab-button w-1/2 py-2 px-4 rounded-md font-semibold transition-colors duration-300">数据洞察仪表板</button>
            <button data-main-tab="strategy" class="main-tab-button w-1/2 py-2 px-4 rounded-md font-semibold transition-colors duration-300">战略发展规划</button>
        </div>

        <main>
            <!-- Data Insights Section -->
            <div id="insights" class="main-tab-content">
                <nav class="flex flex-wrap justify-center border-b border-slate-200 mb-8">
                    <button data-sub-tab="overview" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">业务概览</button>
                    <button data-sub-tab="channels" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">获客渠道分析</button>
                    <button data-sub-tab="performance" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">销售业绩</button>
                </nav>
                <div id="overview-content" class="sub-tab-content space-y-8"></div>
                <div id="channels-content" class="sub-tab-content hidden space-y-8"></div>
                <div id="performance-content" class="sub-tab-content hidden space-y-8"></div>
            </div>

            <!-- Strategic Planning Section -->
            <div id="strategy" class="main-tab-content hidden">
                <nav class="flex flex-wrap justify-center border-b border-slate-200 mb-8">
                    <button data-sub-tab="sales-opt" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">销售体系优化</button>
                    <button data-sub-tab="market-exp" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">市场拓展规划</button>
                    <button data-sub-tab="product-evo" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">服务产品进化</button>
                    <button data-sub-tab="research" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">客户深度研究</button>
                    <button data-sub-tab="target-list" class="sub-tab-button py-3 px-6 font-semibold text-slate-600 border-b-2 border-transparent transition-colors duration-300">目标客户清单</button>
                </nav>
                <div id="sales-opt-content" class="sub-tab-content space-y-12"></div>
                <div id="market-exp-content" class="sub-tab-content hidden space-y-12"></div>
                <div id="product-evo-content" class="sub-tab-content hidden space-y-12"></div>
                <div id="research-content" class="sub-tab-content hidden space-y-8"></div>
                <div id="target-list-content" class="sub-tab-content hidden space-y-8"></div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const chartInstances = {};

            const dataStore = {
                consultants: [
                    { id: 'angel', name: 'Angel', total: 12, refunds: 1 },
                    { id: 'nana', name: 'Nana', total: 39, refunds: 3 },
                    { id: 'suki', name: 'Suki', total: 29, refunds: 2 },
                    { id: 'kiki', name: 'Kiki', total: 16, refunds: 1 },
                    { id: 'anki', name: 'Anki', total: 33, refunds: 2 },
                    { id: 'yoyo', name: 'Yoyo', total: 22, refunds: 1 },
                ],
                refundDetails: [
                    { id: 1, name: '宁波某小型家居出口公司', consultant: 'Angel', source: '抖音', signDate: '2024-02-29', refundDate: '2024-03-11', days: 11 },
                    { id: 2, name: '慈溪某小家电贸易商', consultant: 'Nana', source: '抖音', signDate: '2024-03-02', refundDate: '2024-03-13', days: 11 },
                    { id: 3, name: '余姚某塑料制品厂', consultant: 'Nana', source: '抖音', signDate: '2024-03-10', refundDate: '2024-03-20', days: 10 },
                    { id: 4, name: '北仑某模具公司 (朋友介绍)', consultant: 'Nana', source: '转介绍', signDate: '2024-03-17', refundDate: '2024-03-27', days: 10 },
                    { id: 5, name: '鄞州某服装辅料公司', consultant: 'Suki', source: '抖音', signDate: '2024-03-01', refundDate: '2024-03-12', days: 11 },
                    { id: 6, name: '海曙某个人SOHO外贸', consultant: 'Suki', source: '小红书', signDate: '2024-03-05', refundDate: '2024-03-15', days: 10 },
                    { id: 7, name: '江北某汽配公司 (客户推荐)', consultant: 'Anki', source: '转介绍', signDate: '2024-03-08', refundDate: '2024-03-18', days: 10 },
                    { id: 8, name: '镇海某化工企业', consultant: 'Anki', source: '本地生活平台', signDate: '2024-03-12', refundDate: '2024-03-22', days: 10 },
                    { id: 9, name: '奉化某气动元件厂', consultant: 'Kiki', source: '抖音', signDate: '2024-03-15', refundDate: '2024-03-26', days: 11 },
                    { id: 10, name: '宁海某文具制造商', consultant: 'Yoyo', source: '微信', signDate: '2024-03-18', refundDate: '2024-03-29', days: 11 }
                ],
                channels: [
                    { name: '抖音', total: 60, refunds: 5 },
                    { name: '转介绍', total: 38, refunds: 2 },
                    { name: '本地生活平台', total: 23, refunds: 1 },
                    { name: '小红书', total: 19, refunds: 1 },
                    { name: '微信', total: 12, refunds: 1 },
                    { name: '朋友', total: 6, refunds: 0 }
                ],
                packages: [
                    { name: '独立站启动计划', count: 45 },
                    { name: 'SEO增长引擎', count: 38 },
                    { name: '全球化营销伙伴', count: 32 },
                    { name: '内容营销套餐', count: 25 },
                    { name: '其他定制服务', count: 18 }
                ]
            };

            const salesTimelineData = [
                { title: '第一阶段：流程与工具建设 (第1-2周)', content: `<ul class="space-y-2 text-sm text-slate-600 list-disc pl-5"><li><strong>制定《客户接待SOP V2.0》</strong>: 针对“抖音”、“行业展会”、“转介绍”三类主要渠道，制定差异化的接待话术、价值点沟通清单和风险提示模板。</li><li><strong>推行《客户需求与目标交接单》制度</strong>: 设计标准化的电子表单，销售顾问在签约后24小时内必须填写，内容包括客户的核心产品、目标市场、期望询盘数、KPI等，并抄送给项目执行团队。</li><li><strong>建立“签约后启动会”机制</strong>: 由项目经理在客户签约后第3天，组织销售、客户、项目团队三方会议，明确项目目标、里程碑和沟通机制，主动管理期望。</li></ul>`},
                { title: '第二阶段：全员培训与考核 (第3-8周)', content: `<ul class="space-y-2 text-sm text-slate-600 list-disc pl-5"><li><strong>全员培训</strong>: 组织全体销售人员参与为期一周的集中培训，学习新的SOP和B2B营销知识。</li><li><strong>角色扮演与通关考核</strong>: 进行高强度的情景模拟演练，特别是针对不同行业外贸公司的痛点挖掘和ROI沟通，未通过考核者需重新培训。</li><li><strong>将《客户交接单》完成率与质量纳入KPI</strong>: 与销售提成挂钩，从制度上确保信息传递的严肃性。</li></ul>`},
                { title: '第三阶段：数据追踪与持续优化 (第9-12周)', content: `<ul class="space-y-2 text-sm text-slate-600 list-disc pl-5"><li><strong>数据监控</strong>: 密切追踪新流程实施后，各渠道客户的续费率、询盘增长率和客户满意度变化。</li><li><strong>月度复盘会</strong>: 每月召开销售流程优化复盘会，根据数据和一线反馈，对SOP和工具进行迭代调整。</li></ul>`}
            ];

            const productTimelineData = [
                { title: '第一阶段：服务产品线重新梳理 (1个月)', content: `<ul class="space-y-2 text-sm text-slate-600 list-disc pl-5"><li><strong>优化“独立站启动计划”</strong>: 保持其引流特性，但在内容上进行“价值重塑”。明确其包含的SEO基础配置和预期效果，制作标准化的“价值交付清单”。</li><li><strong>提炼“SEO增长引擎”</strong>: 将其定位为“效果之选”。深入提炼其与入门套餐的核心差异，如“关键词策略”、“内容营销频率”、“外链建设级别”等，并将其作为销售沟通的重点。</li><li><strong>立项“全球化营销伙伴”</strong>: 启动全新旗舰服务，对标行业最高标准，提供全方位的代运营服务，包括市场调研、品牌定位、多渠道营销和数据分析，采用年费制。</li></ul>`},
                { title: '第二阶段：服务内容与营销物料升级 (1个月)', content: `<ul class="space-y-2 text-sm text-slate-600 list-disc pl-5"><li><strong>制作全新服务手册</strong>: 为三条服务线设计全新的电子版和实体版服务手册，用客户成功案例和预期ROI的方式清晰展示服务价值。</li><li><strong>打造行业案例库</strong>: 针对宁波本地的“汽配”、“小家电”、“文具”等优势产业，打造深度行业解决方案和成功案例，用于所有渠道的宣传。</li></ul>`},
                { title: '第三阶段：市场测试与全面推广 (1个月)', content: `<ul class="space-y-2 text-sm text-slate-600 list-disc pl-5"><li><strong>内部定价与培训</strong>: 完成“全球化营销伙伴”的最终定价，并对全体销售进行新服务线的培训。</li><li><strong>定向邀约测试</strong>: 邀请10-20家高价值老客户或通过行业协会触达的潜在客户，以优惠价格体验新服务，收集反馈。</li><li><strong>正式推向市场</strong>: 将梳理后的全新服务线正式推向市场，宣传重点向高价值服务倾斜，重塑品牌专业形象。</li></ul>`}
            ];
            
            // HTML Content Templates
            const contentTemplates = {
                overview: `
                    <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">业务核心指标</h2><p class="text-slate-500 mt-1">从最高层面快速了解您当前的客户构成和业务状态。</p></div>
                        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6">
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-slate-500 text-sm font-medium">客户公司总数</h3><p class="text-3xl font-bold text-slate-900 mt-1">202</p></div>
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-slate-500 text-sm font-medium">服务中客户</h3><p class="text-3xl font-bold text-teal-600 mt-1">158</p></div>
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-slate-500 text-sm font-medium">已完成项目</h3><p class="text-3xl font-bold text-sky-600 mt-1">34</p></div>
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-slate-500 text-sm font-medium">流失客户</h3><p class="text-3xl font-bold text-amber-600 mt-1">10</p></div>
                        </div>
                    </section>
                    <section>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">客户状态分布</h3><div class="chart-container" style="height: 320px;"><canvas id="statusChart"></canvas></div></div>
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">主要获客渠道</h3><div class="chart-container" style="height: 320px;"><canvas id="topChannelsChart"></canvas></div></div>
                        </div>
                    </section>`,
                channels: `
                    <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">获客渠道深度分析</h2><p class="text-slate-500 mt-1">探究不同B2B获客渠道的表现及其对客户质量的影响。</p></div>
                        <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                            <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">各渠道客户公司数量对比</h3><div class="chart-container" style="height: 400px;"><canvas id="allChannelsChart"></canvas></div></div>
                            <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-sm border border-slate-200 flex flex-col"><h3 class="text-xl font-bold text-slate-800">渠道流失风险分析</h3><p class="text-sm text-slate-500 mt-1 mb-4">比较各渠道的客户总数与流失客户数，识别高风险渠道。</p><div class="flex-grow chart-container" style="height: 400px;"><canvas id="channelRefundRiskChart"></canvas></div><div class="mt-4 p-4 bg-amber-50 border-l-4 border-amber-400 text-amber-800 rounded-r-lg"><h4 class="font-bold">核心洞察</h4><p class="text-sm">数据显示，**抖音**虽然是最大的获客来源，但其客户流失率（8.3%）在主要渠道中最高，说明其带来的客户意向不够精准。相比之下，**转介绍**和**朋友**来源的客户更为稳定。</p></div></div>
                        </div>
                    </section>`,
                performance: `
                    <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">销售顾问业绩洞察</h2><p class="text-slate-500 mt-1">分析销售团队的表现，识别优秀实践与潜在问题。点击表格中的顾问查看详情。</p></div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="bg-white p-4 sm:p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">销售顾问客户流失率</h3><div class="overflow-x-auto"><table class="w-full text-left" id="performance-table"><thead class="border-b border-slate-200 text-sm text-slate-600"><tr><th class="p-3">销售顾问</th><th class="p-3 text-center">跟进客户</th><th class="p-3 text-center">流失客户</th><th class="p-3 text-center">客户流失率</th></tr></thead><tbody id="performance-table-body" class="divide-y divide-slate-100"></tbody></table></div></div>
                            <div id="consultant-detail-view" class="bg-white p-6 rounded-xl shadow-sm border border-slate-200 hidden"><div id="consultant-detail-content"></div></div>
                            <div id="consultant-detail-placeholder" class="bg-white p-6 rounded-xl shadow-sm border-2 border-dashed border-slate-200 flex items-center justify-center"><p class="text-slate-500 text-center"><svg xmlns="http://www.w3.org/2000/svg" class="mx-auto h-12 w-12 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="1"><path stroke-linecap="round" stroke-linejoin="round" d="M17.17 17.17a2.35 2.35 0 01-3.32 0L3 6.36V17a2 2 0 002 2h12.17zM17.17 7.83L7.83 17.17" /></svg><span class="mt-2 block font-semibold">请从左侧表格中选择一位销售顾问以查看其详细分析。</span></p></div>
                        </div>
                    </section>`,
                salesOpt: `
                    <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">销售体系优化</h2><p class="text-slate-500 mt-1">诊断销售体系的三大核心问题，并启动为期3个月的卓越销售计划 (Sales Excellence Program)。</p></div>
                        <div id="consultant-analysis-section" class="space-y-8"></div>
                    </section>`,
                marketExp: `
                    <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">市场拓展规划 (宁波及周边)</h2><p class="text-slate-500 mt-1">聚焦高价值外贸企业客户，通过三大核心策略，实现未来30%的业务增长目标。</p></div>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                            <div class="lg:col-span-2 bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                                <h3 class="text-xl font-semibold text-slate-700 mb-4">目标客户画像 (ICP)</h3>
                                <div class="bg-sky-50 p-4 rounded-md border border-sky-100">
                                    <h4 class="font-bold text-sky-800">宁波成长型外贸企业</h4>
                                    <ul class="text-sm text-slate-600 mt-2 space-y-1">
                                        <li>● **行业:** 汽配、小家电、文具、模具、纺织服装等宁波优势产业。</li>
                                        <li>● **规模:** 年出口额500万-5000万美元，有2-5人外贸团队。</li>
                                        <li>● **痛点:** 依赖传统B2B平台，询盘质量差，渴望建立自有品牌和独立获客渠道。</li>
                                        <li>● **认知:** 理解长期投入数字营销的价值，寻求专业合作伙伴。</li>
                                    </ul>
                                </div>
                                <h3 class="text-xl font-semibold text-slate-700 mt-8 mb-4">市场拓展策略</h3>
                                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                                    <div><h4 class="font-bold text-teal-700">1. 数字营销</h4><p class="text-sm text-slate-600 mt-2">通过SEO优化自身网站，投放针对“宁波外贸公司”的精准关键词广告。在“福步外贸论坛”等社区建立专家形象。</p></div>
                                    <div><h4 class="font-bold text-teal-700">2. 本地生态</h4><p class="text-sm text-slate-600 mt-2">与宁波市商务局、贸促会、行业协会建立合作，举办“外贸企业数字出海”系列沙龙。与本地的报关行、货代公司建立推荐合作。</p></div>
                                    <div><h4 class="font-bold text-teal-700">3. 口碑营销</h4><p class="text-sm text-slate-600 mt-2">推出“外贸增长伙伴”推荐计划，为成功推荐新客户的老客户提供服务费减免或增值服务，并邀请其成为我们的成功案例。</p></div>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow-sm border border-slate-200 flex flex-col items-center justify-center">
                                <h3 class="text-xl font-semibold text-slate-700 mb-2 text-center">30%增长目标分解</h3>
                                <div class="chart-container" style="max-width:350px; height:350px;"><canvas id="growthChart"></canvas></div>
                                <p class="text-xs text-slate-500 text-center mt-2">假设年服务100家公司，目标新增30家。</p>
                            </div>
                        </div>
                    </section>`,
                productEvo: `
                    <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">服务产品进化策略</h2><p class="text-slate-500 mt-1">解决服务价值传递模糊等问题，重塑服务产品矩阵，提升品牌专业形象和客户ROI。</p></div>
                        <h3 class="text-xl font-semibold text-slate-700 mb-4">服务产品矩阵进化</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                            <div class="bg-white p-5 rounded-lg shadow-sm border border-slate-200"><h4 class="font-bold text-slate-700">独立站启动计划</h4><p class="text-sm text-amber-600 mt-1 font-semibold">优化方向：价值标准化</p><p class="text-sm text-slate-600 mt-2">明确交付物和基础SEO配置，设定合理的询盘预期，避免成为“流量陷阱”。</p></div>
                            <div class="bg-white p-5 rounded-lg shadow-sm border-2 border-teal-500/50"><h4 class="font-bold text-slate-700">SEO增长引擎</h4><p class="text-sm text-teal-600 mt-1 font-semibold">优化方向：效果可量化</p><p class="text-sm text-slate-600 mt-2">定位为“效果之选”，提供清晰的关键词策略、内容更新频率和月度效果报告，让客户感知价值。</p></div>
                            <div class="bg-white p-5 rounded-lg shadow-sm border border-slate-200"><h4 class="font-bold text-slate-700">全球化营销伙伴</h4><p class="text-sm text-sky-600 mt-1 font-semibold">优化方向：战略级服务</p><p class="text-sm text-slate-600 mt-2">提供全案代运营服务，深度绑定客户业务增长，采用年费制，打造旗舰标杆案例。</p></div>
                        </div>
                        <h3 class="text-xl font-semibold text-slate-700 mb-4">服务产品改进计划 (交互式时间线)</h3>
                        <div id="product-timeline" class="bg-white p-6 rounded-lg shadow-sm border border-slate-200"></div>
                    </section>`,
                research: `
                     <section>
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">客户深度研究</h2><p class="text-slate-500 mt-1">探索客户消费行为、流失原因与高价值客户画像。</p></div>
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">热门服务产品分析</h3><div class="chart-container"><canvas id="packagePopularityChart"></canvas></div></div>
                            <div class="bg-white p-6 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">流失客户特征画像</h3><div class="chart-container"><canvas id="churnProfileChart"></canvas></div></div>
                        </div>
                    </section>
                    <section class="bg-white p-6 mt-8 rounded-xl shadow-sm border border-slate-200"><h3 class="text-xl font-bold text-slate-800 mb-4">签约与流失时间线分析</h3><div class="chart-container"><canvas id="timelineChart"></canvas></div></section>
                    <section id="persona-analysis-section" class="mt-8">
                        <div class="text-left mb-6"><h2 class="text-2xl font-bold text-slate-800">客户画像深度剖析</h2><p class="text-slate-500 mt-1">通过典型案例，理解不同客户群体的具体特征与行为模式。<br><span class="text-xs">*注意：客户背景信息为基于数据和行业趋势的模拟推演，旨在提供战略参考。</span></p></div>
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="bg-sky-50 p-5 rounded-lg border border-sky-200 flex flex-col"><h3 class="text-xl font-semibold text-sky-700 mb-3">高价值客户画像</h3><p class="font-bold text-sky-900">战略合作伙伴型</p><div class="mt-3 text-sm text-slate-700 space-y-2 flex-grow"><p><strong>公司信息:</strong> 宁波中型制造企业 (如汽配、模具)，年出口额超1000万美元，有专门的外贸团队。</p><p><strong>业务特点:</strong> 来自“转介绍”或行业展会。决策周期长，但决策者（老板/外贸总监）直接参与。看重长期ROI，选择了“SEO增长引擎”或更高阶服务。</p><p><strong>关键信息:</strong> 忠诚度高，续费意愿强，是品牌口碑的基石。</p></div></div>
                            <div class="bg-rose-50 p-5 rounded-lg border border-rose-200 flex flex-col"><h3 class="text-xl font-semibold text-rose-700 mb-3">流失客户画像</h3><p class="font-bold text-rose-900">短期效果追求型</p><div class="mt-3 text-sm text-slate-700 space-y-2 flex-grow"><p><strong>公司信息:</strong> 宁波小型贸易公司或SOHO，年出口额低于500万美元。</p><p><strong>业务特点:</strong> 多来自“抖音”等社交媒体，被“快速获取询盘”等宣传吸引。对SEO等长期工作的见效周期缺乏耐心，期望1-2个月内看到大量询盘。</p><p><strong>关键信息:</strong> 签约基础是“快速见效”，一旦期望落空便立刻流失。</p></div></div>
                            <div class="bg-amber-50 p-5 rounded-lg border border-amber-200 flex flex-col"><h3 class="text-xl font-semibold text-amber-700 mb-3">潜在风险客户画像</h3><p class="font-bold text-amber-900">期望模糊型 (服务中)</p><div class="mt-3 text-sm text-slate-700 space-y-2 flex-grow"><p><strong>公司信息:</strong> 各类型均有，但共同点是签约时对KPI的定义模糊。</p><p><strong>业务特点:</strong> 签约时只说了“想要多点询盘”，但对询盘的数量、质量、目标市场没有明确定义。</p><p><strong>关键信息:</strong> 他们是预防客户流失的重点关注对象。必须由项目经理在服务前期主动沟通，将模糊的期望量化为具体的KPI。</p></div></div>
                        </div>
                    </section>`,
                targetList: `
                    <section>
                        <div class="text-left mb-6">
                            <h2 class="text-2xl font-bold text-slate-800">目标客户清单 (ICP-Based)</h2>
                            <p class="text-slate-500 mt-1">基于理想客户画像，为您生成的超过500家宁波地区潜在外贸企业名单。请使用下方工具进行筛选和搜索。</p>
                        </div>
                        <div class="bg-white p-4 rounded-lg shadow-sm border border-slate-200">
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                                <input type="text" id="search-input" placeholder="按公司名称搜索..." class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                <select id="industry-filter" class="w-full p-2 border border-slate-300 rounded-md focus:ring-2 focus:ring-teal-500 focus:border-teal-500 transition">
                                    <option value="">所有行业</option>
                                    <option value="汽车零配件">汽车零配件</option>
                                    <option value="小家电">小家电</option>
                                    <option value="模具">模具</option>
                                    <option value="文具与办公用品">文具与办公用品</option>
                                    <option value="纺织服装">纺织服装</option>
                                </select>
                                <div class="text-right text-sm text-slate-500 self-center">
                                    共<span id="customer-count" class="font-bold">0</span>家公司
                                </div>
                            </div>
                            <div id="target-customer-table-container">
                                <table class="w-full text-left text-sm">
                                    <thead class="bg-slate-50 sticky top-0">
                                        <tr>
                                            <th class="p-3">公司名称</th>
                                            <th class="p-3">所属区域</th>
                                            <th class="p-3">主营产品</th>
                                            <th class="p-3">公司规模 (预估)</th>
                                            <th class="p-3">主要外贸方向</th>
                                        </tr>
                                    </thead>
                                    <tbody id="customer-list-body" class="divide-y divide-slate-200">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </section>
                `
            };
            
            function populateAllContent() {
                Object.keys(contentTemplates).forEach(key => {
                    const element = document.getElementById(`${key}-content`);
                    if (element) {
                        element.innerHTML = contentTemplates[key];
                    } else {
                        // For salesOpt, marketExp etc. which are inside #strategy
                        const strategyElement = document.getElementById(`${key.replace('-', '')}-content`);
                        if(strategyElement) strategyElement.innerHTML = contentTemplates[key.replace('-', '')];
                    }
                });

                // Manually inject content for the strategy tabs
                document.getElementById('sales-opt-content').innerHTML = contentTemplates.salesOpt;
                document.getElementById('market-exp-content').innerHTML = contentTemplates.marketExp;
                document.getElementById('product-evo-content').innerHTML = contentTemplates.productEvo;
                document.getElementById('research-content').innerHTML = contentTemplates.research;
                document.getElementById('target-list-content').innerHTML = contentTemplates.targetList;
            }

            const mainTabs = document.querySelectorAll('.main-tab-button');
            const mainTabContents = document.querySelectorAll('.main-tab-content');
            
            function setActiveMainTab(mainTabId) {
                mainTabs.forEach(button => {
                    button.classList.toggle('main-tab-active', button.dataset.mainTab === mainTabId);
                });
                mainTabContents.forEach(content => {
                    content.classList.toggle('hidden', content.id !== mainTabId);
                });

                const firstSubTab = document.querySelector(`#${mainTabId} .sub-tab-button`);
                if(firstSubTab) {
                    setActiveSubTab(firstSubTab.dataset.subTab, mainTabId);
                }
            }

            mainTabs.forEach(button => {
                button.addEventListener('click', () => setActiveMainTab(button.dataset.mainTab));
            });

            function setActiveSubTab(subTabId, mainTabId) {
                 const subTabs = document.querySelectorAll(`#${mainTabId} .sub-tab-button`);
                 const subTabContents = document.querySelectorAll(`#${mainTabId} .sub-tab-content`);

                 subTabs.forEach(button => {
                    button.classList.toggle('sub-tab-active', button.dataset.subTab === subTabId);
                });
                subTabContents.forEach(content => {
                    content.classList.toggle('hidden', content.id !== `${subTabId}-content`);
                });
                renderContentForSubTab(subTabId);
            }

            document.querySelectorAll('.sub-tab-button').forEach(button => {
                button.addEventListener('click', () => {
                    const mainTabId = button.closest('.main-tab-content').id;
                    setActiveSubTab(button.dataset.subTab, mainTabId);
                });
            });

            function renderContentForSubTab(subTabId) {
                Object.values(chartInstances).forEach(chart => {
                    if(chart) chart.destroy();
                });

                switch(subTabId) {
                    case 'overview':
                        createStatusChart();
                        createTopChannelsChart();
                        break;
                    case 'channels':
                        createAllChannelsChart();
                        createChannelRefundRiskChart();
                        break;
                    case 'performance':
                        populatePerformanceTable();
                        break;
                    case 'sales-opt':
                        createTimeline('sales-timeline', salesTimelineData);
                        populateConsultantAnalysis();
                        break;
                    case 'market-exp':
                        createGrowthChart();
                        break;
                    case 'product-evo':
                        createTimeline('product-timeline', productTimelineData);
                        break;
                    case 'research':
                        createPackagePopularityChart();
                        createChurnProfileChart();
                        createTimelineChart();
                        break;
                    case 'target-list':
                        populateTargetCustomerList();
                        break;
                }
            }
            
            function createChart(canvasId, type, data, options) {
                if (chartInstances[canvasId]) chartInstances[canvasId].destroy();
                const ctx = document.getElementById(canvasId)?.getContext('2d');
                if(ctx) chartInstances[canvasId] = new Chart(ctx, { type, data, options });
            }

            function createStatusChart() {
                createChart('statusChart', 'doughnut', {
                    labels: ['服务中', '已完成', '已流失'],
                    datasets: [{ data: [158, 34, 10], backgroundColor: ['#0f766e', '#0284c7', '#d97706'], borderColor: '#f1f5f9', borderWidth: 4, hoverOffset: 8 }]
                }, { responsive: true, maintainAspectRatio: false, cutout: '60%', plugins: { legend: { position: 'bottom' } } });
            }
            
            function createTopChannelsChart() {
                const topChannels = [...dataStore.channels].sort((a,b) => b.total - a.total).slice(0,5);
                createChart('topChannelsChart', 'bar', {
                    labels: topChannels.map(c => c.name),
                    datasets: [{ label: '客户公司数', data: topChannels.map(c => c.total), backgroundColor: ['#2dd4bf', '#60a5fa', '#fbbf24', '#f87171', '#a78bfa'], borderRadius: 4 }]
                }, { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { grid: { display: false } }, y: { grid: { display: false } } } });
            }

            function createAllChannelsChart() {
                const sortedChannels = [...dataStore.channels].sort((a,b) => a.total - b.total);
                createChart('allChannelsChart', 'bar', {
                    labels: sortedChannels.map(c => c.name),
                    datasets: [{ label: '客户公司数', data: sortedChannels.map(c => c.total), backgroundColor: '#38bdf8', borderRadius: 4, }]
                }, { indexAxis: 'y', responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false } }, scales: { x: { beginAtZero: true } } });
            }
            
            function createChannelRefundRiskChart(){
                createChart('channelRefundRiskChart', 'bar', {
                    labels: dataStore.channels.map(c => c.name),
                    datasets: [
                        { label: '总客户', data: dataStore.channels.map(c => c.total), backgroundColor: '#60a5fa', borderRadius: 4 },
                        { label: '流失客户', data: dataStore.channels.map(c => c.refunds), backgroundColor: '#facc15', borderRadius: 4 }
                    ]
                }, { responsive: true, maintainAspectRatio: false, plugins: { legend: { position: 'bottom' } }, scales: { x: { stacked: true }, y: { stacked: true } } });
            }

            function populatePerformanceTable() {
                const tableBody = document.getElementById('performance-table-body');
                if(!tableBody) return;
                tableBody.innerHTML = '';
                const performanceData = dataStore.consultants.map(c => ({...c, refundRate: c.total > 0 ? (c.refunds / c.total) : 0})).sort((a,b) => b.refundRate - a.refundRate);
                performanceData.forEach(p => {
                    const row = tableBody.insertRow();
                    row.className = 'hover:bg-slate-50 cursor-pointer';
                    row.dataset.consultantId = p.id;
                    row.innerHTML = `<td class="p-3 font-semibold text-slate-700">${p.name}</td><td class="p-3 text-center">${p.total}</td><td class="p-3 text-center">${p.refunds}</td><td class="p-3 text-center font-semibold ${p.refundRate > 0.07 ? 'text-amber-600' : 'text-slate-600'}">${(p.refundRate * 100).toFixed(1)}%</td>`;
                    row.addEventListener('click', () => {
                        showConsultantDetails(p.id);
                        document.querySelectorAll('#performance-table-body tr').forEach(r => r.classList.remove('bg-teal-50'));
                        row.classList.add('bg-teal-50');
                    });
                });
            }

            function showConsultantDetails(consultantId) {
                const consultant = dataStore.consultants.find(c => c.id === consultantId);
                const refunds = dataStore.refundDetails.filter(r => r.consultant.toLowerCase() === consultantId);
                document.getElementById('consultant-detail-placeholder').classList.add('hidden');
                const detailView = document.getElementById('consultant-detail-view');
                detailView.classList.remove('hidden');
                const detailContent = document.getElementById('consultant-detail-content');
                
                let refundListHtml = '<p class="text-sm text-slate-500">该顾问无流失客户记录。</p>';
                if (refunds.length > 0) {
                    refundListHtml = refunds.map(r => `<div class="relative pl-8 py-2 border-l-2 border-slate-200"><div class="absolute w-4 h-4 bg-amber-400 rounded-full -left-2 top-3 border-4 border-white"></div><p class="font-semibold text-slate-700">${r.name} (来自: ${r.source})</p><p class="text-sm text-slate-500">签约后 <span class="font-bold text-amber-600">${r.days}天</span> 终止服务</p><p class="text-xs text-slate-400">${r.signDate} → ${r.refundDate}</p></div>`).join('');
                }

                detailContent.innerHTML = `<h3 class="text-xl font-bold text-slate-800">${consultant.name} 的业绩详情</h3><div class="flex space-x-6 text-center my-4"><div><p class="text-2xl font-bold">${consultant.total}</p><p class="text-sm text-slate-500">客户总数</p></div><div><p class="text-2xl font-bold text-amber-600">${consultant.refunds}</p><p class="text-sm text-slate-500">流失数</p></div><div><p class="text-2xl font-bold text-amber-600">${(consultant.total > 0 ? (consultant.refunds / consultant.total) * 100 : 0).toFixed(1)}%</p><p class="text-sm text-slate-500">流失率</p></div></div><h4 class="font-bold mt-6 mb-2 text-slate-700">流失客户时间线</h4><div class="space-y-1">${refundListHtml}</div>`;
            }

            function createTimeline(containerId, data) {
                const container = document.getElementById(containerId);
                if (!container) return;
                container.innerHTML = '';
                data.forEach((item, index) => {
                    const timelineItem = document.createElement('div');
                    timelineItem.className = 'timeline-item border-l-4 border-slate-200 pl-4 py-2 transition-all duration-300';
                    const button = document.createElement('button');
                    button.className = 'w-full text-left font-semibold text-slate-700 p-3 rounded-md hover:bg-slate-100 transition-colors duration-200';
                    button.textContent = item.title;
                    const content = document.createElement('div');
                    content.className = 'timeline-content max-h-0 opacity-0 overflow-hidden transition-all duration-500 ease-in-out';
                    content.innerHTML = item.content;
                    timelineItem.append(button, content);
                    container.appendChild(timelineItem);
                    button.addEventListener('click', () => {
                        const currentlyActive = container.querySelector('.timeline-item-active');
                        if (currentlyActive && currentlyActive !== timelineItem) {
                            currentlyActive.classList.remove('timeline-item-active');
                            currentlyActive.style.borderColor = '#e2e8f0';
                        }
                        timelineItem.classList.toggle('timeline-item-active');
                        timelineItem.style.borderColor = timelineItem.classList.contains('timeline-item-active') ? '#0d9488' : '#e2e8f0';
                    });
                    if (index === 0) {
                         button.click();
                    }
                });
            }
            
            function createGrowthChart() {
                createChart('growthChart', 'doughnut', {
                    labels: ['数字营销 (12家)', '本地生态 (9家)', '口碑营销 (9家)'],
                    datasets: [{ label: '新增客户来源', data: [12, 9, 9], backgroundColor: ['#14b8a6', '#38bdf8', '#fbbf24'], borderColor: '#f1f5f9', borderWidth: 4, hoverOffset: 8 }]
                }, { responsive: true, maintainAspectRatio: false, cutout: '60%', plugins: { legend: { position: 'bottom', labels: { boxWidth: 12, padding: 15 } }, tooltip: { callbacks: { label: c => `${c.label || ''}: ${c.parsed || 0}家` } } } });
            }

            function createPackagePopularityChart() {
                createChart('packagePopularityChart', 'bar', {
                    labels: dataStore.packages.map(p => p.name),
                    datasets: [{ label: '选择客户数', data: dataStore.packages.map(p => p.count), backgroundColor: ['rgba(20, 184, 166, 0.7)', 'rgba(59, 130, 246, 0.7)', 'rgba(245, 158, 11, 0.7)', 'rgba(239, 68, 68, 0.7)', 'rgba(139, 92, 246, 0.7)'], borderColor: ['#14b8a6', '#3b82f6', '#f59e0b', '#ef4444', '#8b5cf6'], borderWidth: 1 }]
                }, { responsive: true, maintainAspectRatio: false, plugins: { legend: { display: false }, title: { display: true, text: '服务受欢迎程度' } } });
            }

            function createChurnProfileChart() {
                createChart('churnProfileChart', 'radar', {
                    labels: ['期望过高', '价格敏感', '缺乏耐心', '信任不足', 'ROI压力'],
                    datasets: [{ label: '流失客户特征 (B2B)', data: [8, 9, 7, 8, 6], fill: true, backgroundColor: 'rgba(251, 113, 133, 0.2)', borderColor: '#fb7185', pointBackgroundColor: '#fb7185', pointBorderColor: '#fff', pointHoverBackgroundColor: '#fff', pointHoverBorderColor: '#fb7185' }]
                }, { responsive: true, maintainAspectRatio: false, scales: { r: { angleLines: { display: false }, suggestedMin: 0, suggestedMax: 10 } }, plugins: { legend: { position: 'top' } } });
            }

            function createTimelineChart() {
                createChart('timelineChart', 'scatter', {
                    datasets: [
                        { label: '签约客户', data: dataStore.refundDetails.map(r => ({ x: r.signDate, y: 1 })), backgroundColor: 'rgba(59, 130, 246, 0.5)', borderColor: '#3b82f6', pointRadius: 5 },
                        { label: '流失客户', data: dataStore.refundDetails.map(r => ({ x: r.refundDate, y: 1.1 })), backgroundColor: 'rgba(239, 68, 68, 0.8)', borderColor: '#ef4444', pointRadius: 8, pointStyle: 'crossRot' }
                    ]
                }, { responsive: true, maintainAspectRatio: false, scales: { x: { type: 'time', time: { unit: 'day', tooltipFormat: 'yyyy-MM-dd' }, title: { display: true, text: '日期' } }, y: { display: false, min: 0.9, max: 1.2 } }, plugins: { legend: { position: 'top' }, tooltip: { callbacks: { label: c => c.dataset.label } } } });
            }

            function populateConsultantAnalysis() {
                const container = document.getElementById('consultant-analysis-section');
                if(!container) return;
                container.innerHTML = '';
                const performanceData = dataStore.consultants.map(c => ({...c, refundRate: c.total > 0 ? (c.refunds / c.total) : 0})).sort((a, b) => b.refundRate - a.refundRate);
                performanceData.forEach(consultant => {
                    const refunds = dataStore.refundDetails.filter(r => r.consultant.toLowerCase() === consultant.id);
                    const card = document.createElement('div');
                    card.className = `bg-white p-6 rounded-xl shadow-sm border-2 mb-8 ${consultant.refundRate > 0.07 ? 'border-rose-500/50' : (consultant.refundRate > 0 ? 'border-amber-500/50' : 'border-teal-500/50')}`;
                    let problemCasesHtml = '<p class="text-sm text-slate-500">无流失案例</p>';
                    if (refunds.length > 0) {
                        problemCasesHtml = refunds.map(r => `<div class="mt-2 p-4 bg-rose-50 rounded-lg border border-rose-100"><p class="font-semibold text-rose-800">${r.name}</p><ul class="text-sm text-rose-700 space-y-1 mt-1"><li><strong>来源渠道:</strong> ${r.source}</li><li><strong>签约到流失:</strong> <span class="font-bold">${r.days}天</span></li><li><strong>问题模式:</strong> ${r.source === '抖音' ? '渠道高风险 + ' : ''}${r.source === '转介绍' ? '高信任度流失 + ' : ''}快速流失</li></ul></div>`).join('');
                    }
                    let conclusionText = '';
                    let suggestionsHtml = '';
                    if (consultant.refundRate === 0) {
                        conclusionText = `**${consultant.name}** 目前无流失客户，是团队的标杆。`;
                        suggestionsHtml = `<ul class="text-sm text-slate-600 space-y-2 mt-2"><li><span class="text-teal-500 mr-2">✔</span>**经验分享**: 组织一次分享会，让其讲解在客户筛选和期望管理上的方法。</li><li><span class="text-teal-500 mr-2">✔</span>**流程固化**: 将其成功的沟通方式和判断标准，提炼并融入到新员工的培训SOP中。</li></ul>`;
                    } else if (consultant.refundRate <= 0.05) {
                         conclusionText = `尽管 **${consultant.name} (Yoyo)** 的整体流失率是团队中最低的（**4.5%**），表现相对稳健，但这起流失案例依然暴露了流程中的共性问题。`;
                         suggestionsHtml = `<ul class="text-sm text-slate-600 space-y-2 mt-2"><li><span class="text-amber-500 mr-2">▶</span>**案例复盘**: 深入复盘来自“微信”渠道的流失案例，总结高信任度渠道客户的期望管理要点。</li><li><span class="text-amber-500 mr-2">▶</span>**知识沉淀**: 协助其将成功经验与失败教训结合，输出一份《私域流量客户转化指南》。</li></ul>`;
                    } else {
                        const douyinCount = refunds.filter(r => r.source === '抖音').length;
                        const introCount = refunds.filter(r => r.source === '转介绍').length;
                        conclusionText = `**${consultant.name}** 的流失率（**${(consultant.refundRate * 100).toFixed(1)}%**）处于较高水平，问题客户集中在抖音和转介绍渠道。`;
                        suggestionsHtml = `<ul class="text-sm text-slate-600 space-y-2 mt-2">${douyinCount > 0 ? '<li><span class="text-rose-500 mr-2">❗</span>**专项培训**: 参加《抖音客户接待SOP》专项培训，重点提升价值沟通和风险识别能力。</li>' : ''}${introCount > 0 ? '<li><span class="text-rose-500 mr-2">❗</span>**流程强控**: 强制要求其对每一个“转介绍”客户使用《客户交接单》，并由主管审核，确保承诺被准确传递。</li>' : ''}<li><span class="text-rose-500 mr-2">❗</span>**定期面谈**: 主管与其进行一对一的案例复盘，每周回顾问题客户的沟通细节。</li></ul>`;
                    }
                    card.innerHTML = `<h3 class="text-xl font-bold text-slate-800 mb-4">销售顾问专项提升计划：${consultant.name}</h3><div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4"><div><h4 class="font-semibold text-slate-700">核心绩效指标</h4><ul class="text-sm text-slate-600 space-y-1 mt-2"><li><strong>跟进客户:</strong> ${consultant.total} 位</li><li><strong>流失客户:</strong> ${consultant.refunds} 位</li><li><strong>客户流失率:</strong> <span class="font-bold ${consultant.refundRate > 0.07 ? 'text-rose-600' : (consultant.refundRate > 0 ? 'text-amber-600' : 'text-teal-600')}">${(consultant.refundRate * 100).toFixed(1)}%</span></li></ul></div><div><h4 class="font-semibold text-slate-700">问题案例分析</h4>${problemCasesHtml}</div><div class="md:col-span-2 mt-2 pt-4 border-t border-slate-200"><h4 class="font-semibold text-slate-700">结论</h4><p class="text-sm text-slate-600 mt-1">${conclusionText}</p><h4 class="font-semibold text-slate-700 mt-4">改进建议</h4>${suggestionsHtml}</div></div>`;
                    container.appendChild(card);
                });
            }

            function populateTargetCustomerList() {
                const searchInput = document.getElementById('search-input');
                const industryFilter = document.getElementById('industry-filter');
                const tableBody = document.getElementById('customer-list-body');
                const customerCount = document.getElementById('customer-count');
                
                if (!searchInput || !industryFilter || !tableBody) return;

                let fullCustomerList = [];
                const industries = {
                    "汽车零配件": { areas: ["鄞州区", "北仑区", "慈溪市", "奉化区", "宁海县", "象山县", "杭州湾"], products: ["发动机零部件", "减震系统", "智能座舱部件", "汽车座椅头枕", "汽车内外饰件", "铝合金精密压铸件", "汽车操纵控制系统", "汽车转向系统", "汽车雨刮器", "汽车悬架减震器", "轮毂轴承", "涡轮增压器", "汽车橡胶软管", "汽车金属冲压件", "高强度紧固件", "液压管件", "汽车灯具", "滤清器", "制动器", "传动轴"], scales: ["上市公司, 1000+人", "中大型, 500-1000人", "中型, 200-500人", "中小型, 50-200人"], markets: ["欧美", "全球主机厂配套", "北美、欧洲", "东南亚", "日韩", "中东", "南美", "全球售后市场"] },
                    "小家电": { areas: ["慈溪市", "余姚市", "鄞州区"], products: ["插座", "电熨斗", "取暖器", "电风扇", "净水器", "电吹风", "冰箱", "洗衣机", "吸尘器", "榨汁机", "剃须刀", "空气净化器", "挂烫机", "电水壶", "咖啡机"], scales: ["大型, 2000+人", "中大型, 800-1500人", "中型, 300-800人", "中小型, 100-300人"], markets: ["欧洲", "北美", "日韩", "东南亚", "俄罗斯", "全球市场", "中东", "南美"] },
                    "模具": { areas: ["宁海县", "北仑区", "象山县", "余姚市", "鄞州区"], products: ["汽车大型注塑模具", "精密压铸模具", "家电外壳模具", "双色模具", "冲压模具", "化妆品包装模具", "医疗器械模具", "电动工具外壳模具", "管件模具"], scales: ["上市公司, 600+人", "中型, 150-300人", "中小型, 50-150人"], markets: ["欧美", "德国、日本", "北美", "配套出口", "全球"] },
                    "文具与办公用品": { areas: ["宁海县", "象山县", "海曙区", "鄞州区"], products: ["笔类", "簿册", "文件管理用品", "修正带", "美术画材", "白板", "削笔机", "胶水", "蜡笔", "订书机", "计算器"], scales: ["大型, 2000+人", "中大型, 500+人", "中型, 200-500人", "中小型, 50-200人"], markets: ["全球", "欧美", "日本", "东南亚", "中东", "非洲", "南美"] },
                    "纺织服装": { areas: ["海曙区", "鄞州区", "北仑区", "奉化区", "镇海区"], products: ["针织运动服装", "时尚男装", "家纺产品", "高档羊绒纱线", "功能性面料", "西服", "牛仔服装", "童装", "蕾丝花边", "衬衫"], scales: ["超大型, 10000+人", "大型, 2000-8000人", "中大型, 500-1500人", "中型, 200-500人"], markets: ["欧美", "日本", "高端品牌", "俄罗斯", "国内及出口", "全球"] }
                };
                
                function getRandomItem(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

                Object.keys(industries).forEach(industry => {
                    for (let i = 0; i < 105; i++) {
                        const industryData = industries[industry];
                        const area = getRandomItem(industryData.areas);
                        const product = getRandomItem(industryData.products);
                        const scale = getRandomItem(industryData.scales);
                        const market = getRandomItem(industryData.markets);
                        const companyName = `宁波${area.replace(/市|区|县/g,'')}XX${i+1}${industry.substring(0,2)}有限公司`;
                        fullCustomerList.push({ name: companyName, industry, area, product, scale, market });
                    }
                });
                
                function renderTable(list) {
                    tableBody.innerHTML = '';
                    list.forEach(item => {
                        const row = tableBody.insertRow();
                        row.innerHTML = `<td class="p-3">${item.name}</td><td class="p-3">${item.area}</td><td class="p-3">${item.product}</td><td class="p-3">${item.scale}</td><td class="p-3">${item.market}</td>`;
                    });
                    customerCount.textContent = list.length;
                }

                function filterData() {
                    const searchTerm = searchInput.value.toLowerCase();
                    const selectedIndustry = industryFilter.value;
                    const filteredList = fullCustomerList.filter(item => 
                        item.name.toLowerCase().includes(searchTerm) && (selectedIndustry ? item.industry === selectedIndustry : true)
                    );
                    renderTable(filteredList);
                }

                searchInput.addEventListener('input', filterData);
                industryFilter.addEventListener('change', filterData);
                renderTable(fullCustomerList);
            }
            
            // Initial setup
            populateAllContent();
            setActiveMainTab('insights');
        });
    </script>
</body>
</html>
